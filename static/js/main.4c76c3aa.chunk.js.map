{"version":3,"sources":["internationalization/i18n.ts","serviceWorker.js","store/ui/sections/pointCloudSection/pointCloudSection.ts","store/ui/panels/pointCloudFiltersPanel/pointCloudFiltersPanel.ts","store/store.ts","store/rootReducer.ts","store/ui/uiReducer.ts","store/ui/sections/uiSectionsReducer.ts","store/ui/panels/uiPanelsReducer.ts","store/loadState.ts","globalStyle.ts","views/components/theme/defaultAppThemeValues.ts","views/components/theme/theme.ts","views/components/theme/createAppTheme.ts","views/components/theme/ThemeColors.ts","views/components/theme/index.tsx","views/components/theme/themeAccessors.ts","views/components/app/styles.ts","views/components/layout/headerPanel/style.ts","views/components/layout/headerPanel/index.tsx","views/components/layout/sections/pointCloudSection/index.tsx","views/components/layout/instrumentalPanel/style.ts","views/components/shared/style.ts","views/components/layout/instrumentalPanel/index.tsx","views/components/layout/statePanel/style.ts","views/components/layout/statePanel/index.tsx","services/eventBus/EventBus.ts","views/components/layout/scene/code/SceneAspects.ts","services/apiProvider/ApiProvider.ts","services/windowPanelsService/windowPanels/PointCloudFiltersWindow.ts","services/windowPanelsService/windowPanels/base/WindowPanel.ts","services/windowPanelsService/WindowPanelTypes.ts","services/windowPanelsService/windowPanels/WindowPanelProvider.ts","environment/ioc/ServiceTypes.ts","environment/ioc/IoC.ts","views/components/layout/scene/code/setupScene.ts","utilities/color/hexToRgb.ts","views/components/layout/scene/code/setupAxis.ts","views/components/layout/scene/code/setupZoom.ts","views/components/layout/scene/style.ts","views/components/layout/pointCloudSystem/code/SolidPoint.ts","utilities/math/calculateMaxMinOfArray.ts","services/eventBus/EventTypes.ts","views/components/layout/pointCloudSystem/code/constructPointCloud.ts","views/components/layout/pointCloudSystem/style.ts","views/components/layout/mobile/drawer/bottom/code/BottomDrawerContentType.ts","views/components/layout/pointCloudSystem/index.tsx","views/components/layout/panels/shared/style.ts","views/components/layout/panels/pointCloudPanel/style.ts","views/components/layout/panels/pointCloudPanel/shared/index.tsx","views/components/layout/panels/pointCloudPanel/index.tsx","views/components/layout/panels/style.ts","views/components/layout/panels/index.tsx","views/components/layout/scene/index.tsx","utilities/dom/isCanvasSupported.ts","views/components/layout/scene/code/setupCamera.ts","views/components/layout/scene/code/setupLight.ts","views/components/layout/mobile/headerPanel/style.ts","views/components/layout/mobile/drawer/left/pointCloudMenuItem/index.tsx","views/components/layout/mobile/drawer/left/style.ts","views/components/layout/mobile/drawer/left/index.tsx","views/components/layout/mobile/drawer/bottom/style.ts","views/components/layout/panels/pointCloudPanel/mobile/style.ts","views/components/layout/panels/pointCloudPanel/mobile/index.tsx","views/components/layout/mobile/drawer/bottom/index.tsx","views/components/layout/mobile/headerPanel/index.tsx","views/components/snackbar/style.ts","views/components/snackbar/index.tsx","views/components/app/index.tsx","index.tsx"],"names":["i18n","use","Backend","initReactI18next","init","fallbackLng","initImmediate","lng","debug","interpolation","escapeValue","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","slice","createSlice","name","initialState","isActive","pointsCloudFile","reducers","pointCloudLoadFile","action","update","$set","payload","showPointCloudFiltersPanel","closePointCloudFiltersPanel","actions","reducer","filterXFromLimit","filterXToLimit","filterYFromLimit","filterYToLimit","filterZFromLimit","filterZToLimit","changeXFromLimit","changeXToLimit","changeYFromLimit","changeYToLimit","changeZFromLimit","changeZToLimit","getPointCloudFiltersPanelSelector","ui","panels","pointCloudFiltersPanel","store","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","configureStore","combineReducers","sections","pointCloudSection","pointCloudSectionReducer","preloadedState","middleware","logger","devTools","process","useAppDispatch","useDispatch","GlobalStyle","createGlobalStyle","normalize","defaultAppThemeValues","app","colors","main","white","lightGray","mediumGray","darkGray","lightBlue","mediumBlue","darkBlue","palette","black","gray","blue1","dark","light","medium","blue2","blue3","green","orange","purple1","purple2","red","yellow","font","sizes","header","headerMobile","instrumentalPanel","footer","lang","options","ThemeColors","theme","createMuiTheme","Theme","children","StylesProvider","injectFirst","getTheme","keys","props","path","themeColor","key","appSizes","Area","styled","breakpoints","down","HeaderPanelContainer","div","withTheme","_","t","useTranslation","Tooltip","title","IconButton","size","color","style","marginLeft","fontSize","dispatch","type","onChange","e","preventDefault","file","target","files","undefined","id","display","htmlFor","component","onClick","verticalAlign","Panel","AppDivider","Divider","AppDividerLight","AppDividerBold","AppCloseIcon","CloseIcon","orientation","FooterContainer","EventBus","injectable","eventEmitter","EventEmitter","event","this","listeners","map","f","includes","addListener","removeListener","value","emit","SceneAspects","_engine","_scene","_camera","_light","_pointsCloudSystem","ApiProvider","PointCloudFiltersWindow","Symbol","for","WindowPanelTypes","WindowPanelsProvider","windowPanelType","Error","API_PROVIDER_SERVICE","EVENT_BUS_SERVICE","WINDOW_PANELS_SERVICE","IoC","Container","autoBindInjectable","defaultScope","skipBaseClassChecks","bind","to","inSingletonScope","setupScene","engine","scene","BABYLON","hex","replace","m","r","g","b","result","exec","parseInt","hexToRgb","clearColor","sceneBase","makeTextPlane","text","dynamicTexture","hasAlpha","drawText","plane","mesh","CreatePlane","standardMaterial","specularColor","diffuseTexture","material","backFaceCulling","CreateLines","Zero","position","setupAxis","runRenderLoop","render","addEventListener","resize","setupZoom","camera","totalZoom","zoomTarget","onPointerObservable","add","eventData","delta","Math","max","min","wheelDelta","detail","deltaY","totalX","abs","orthoLeft","orthoRight","totalY","orthoTop","orthoBottom","aspectRatio","ratio","x","y","panningSensibility","zoom2DView","POINTERWHEEL","Unproject","pointerX","pointerY","getRenderWidth","getRenderHeight","getWorldMatrix","getViewMatrix","getProjectionMatrix","POINTERMOVE","Canvas","canvas","up","SolidPoint","z","parameter","_x","_y","_z","_parameter","calculateMinMaxOfArray","array","arrayLength","length","borderIncrement","arrayCounter","lastBottomBorder","lastTopBorder","minValue","maxValue","arrayPart","SHOW_SNACKBAR_EVENT","SHOW_NEW_VERSION_EVENT","CLOSE_DRAWER_EVENT","OPEN_BOTTOM_DRAWER_EVENT","constructPointCloud","points","parameterMin","parameterMax","cloudPointFilters","a","filteredPoints","filterPointCloud","pointsCloudSystem","updatable","diffP","constructParticle","particle","i","point","pPercent","pointsCount","addPoints","buildMeshAsync","filter","BottomDrawerContentType","PointCloudContainer","dataSelector","createSelector","pointCloudFilters","PointCloud","useSelector","cloudPointFile","reader","FileReader","onload","fileLines","split","forEach","line","push","Number","parseFloat","p","parameters","apiProvider","get","sceneRootApi","dispose","previousPcsMesh","eventBus","send","message","i18next","alertType","blob","readAsText","setUpPointCloud","PanelContainer","section","width","height","PanelHeaderContainer","strong","PanelHeader","PanelHeaderText","PanelHeaderTypography","Typography","PanelBodyContainer","PointCloudPanelLineContainer","TextField","label","step","isNumeric","InputLabelProps","shrink","inputProps","variant","data","bounds","handle","defaultPosition","float","PanelsContainer","initialize","elem","document","createElement","getContext","isCanvasSupported","alert","sceneAspects","setPosition","attachControl","alpha","PI","mode","ORTHOGRAPHIC_CAMERA","lowerRadiusLimit","radius","upperRadiusLimit","setupCamera","intensity","setupLight","ref","Hidden","smDown","HeaderMobilePanelContainer","useState","subMenuIsOpen","setState","openPanelPointCloudFiltersClickHandle","contentType","Fragment","ListItem","button","ListItemIcon","ListItemText","primary","ExpandLess","ExpandMore","Collapse","in","timeout","unmountOnExit","List","disablePadding","paddingLeft","DrawerContainer","DrawerHeader","spacing","DrawerHeaderTitle","isOpen","useEffect","handleDrawerClose","Drawer","anchor","open","onClose","aria-labelledby","DrawerBottomContainer","DrawerBottomHeader","MobilePanelContainer","currentType","stateType","valueOf","PointCloudPanelMobileContainer","visiblePanel","subscribe","contentChangedHandler","unsubscribe","events","content","marginRight","drawerIsOpen","onCloseDrawerEvent","AppBar","Toolbar","background","aria-label","flexGrow","SnackbarWrapper","isVersionSnackbar","snackbarState","setSnackbarState","snackbarEventHandler","showNewVersionEventHandler","callback","updateVersionAction","Button","reload","Snackbar","anchorOrigin","vertical","horizontal","reason","autoHideDuration","Alert","severity","closeText","Grid","container","alignItems","direction","item","xs","mdUp","renderRefreshUI","refresh","ReactDOM","StrictMode","CssBaseline","fallback","getElementById","onbeforeunload","onerror","errorMsg","url","lineNumber","URL","href","origin","fetch","headers","response","status","indexOf","ready","unregister","checkValidServiceWorker","initWorkboxRefresh"],"mappings":"oMAIAA,IACKC,IAAIC,KACJD,IAAIE,KACJC,KAAK,CACFC,YAAa,KACbC,eAAgB,EAChBC,IAAK,KACLC,OAAO,EACPC,cAAe,CACXC,aAAa,KAIVV,EAAf,EAAeA,ICLTW,EAAcC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DAuCN,SAASC,EAAgBC,EAAOC,GAC9BC,UAAUC,cACPC,SAASJ,GACTK,MAAK,SAAAC,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBG,QACfT,UAAUC,cAAcS,YAI1BC,QAAQC,IACN,iHAKEb,GAAUA,EAAOc,UACnBd,EAAOc,SAAST,KAMlBO,QAAQC,IAAI,sCAGRb,GAAUA,EAAOe,WACnBf,EAAOe,UAAUV,WAO5BW,OAAM,SAAAC,GACLL,QAAQK,MAAM,4CAA6CA,M,oDClF3DC,EAAQC,YAAY,CACtBC,KAAM,oBACNC,aARyC,CACzCC,UAAU,EACVC,gBAAiB,MAOjBC,SAAU,CACNC,mBADM,SACaf,EAA+BgB,GAC9C,OAAOC,IAAOjB,EAAO,CACjBa,gBAAiB,CAACK,KAAMF,EAAOG,YAGvCC,2BANM,SAMqBpB,GACvB,OAAOiB,IAAOjB,EAAO,CACjBY,SAAU,CAACM,MAAM,MAGzBG,4BAXM,SAWsBrB,GACxB,OAAOiB,IAAOjB,EAAO,CACjBY,SAAU,CAACM,MAAM,SAS1BI,EAAoBd,EAApBc,QAASC,EAAWf,EAAXe,QACFR,EAA+EO,EAA/EP,mBAAoBK,EAA2DE,EAA3DF,2BAA4BC,EAA+BC,EAA/BD,4BAC/CE,IC7Bf,IASMf,EAAQC,YAAY,CACtBC,KAAM,yBACNC,aAXyC,CACzCa,kBAAmB,IACnBC,eAAgB,IAChBC,kBAAmB,IACnBC,eAAgB,IAChBC,kBAAmB,IACnBC,eAAgB,KAMhBf,SAAU,CACNgB,iBAAkB,SAAC9B,EAA+BgB,GAAhC,OACdC,IAAOjB,EAAO,CACVwB,iBAAkB,CAACN,KAAMF,EAAOG,YAExCY,eAAgB,SAAC/B,EAA+BgB,GAAhC,OACZC,IAAOjB,EAAO,CACVyB,eAAgB,CAACP,KAAMF,EAAOG,YAEtCa,iBAAkB,SAAChC,EAA+BgB,GAAhC,OACdC,IAAOjB,EAAO,CACV0B,iBAAkB,CAACR,KAAMF,EAAOG,YAExCc,eAAgB,SAACjC,EAA+BgB,GAAhC,OACZC,IAAOjB,EAAO,CACV2B,eAAgB,CAACT,KAAMF,EAAOG,YAEtCe,iBAAkB,SAAClC,EAA+BgB,GAAhC,OACdC,IAAOjB,EAAO,CACV4B,iBAAkB,CAACV,KAAMF,EAAOG,YAExCgB,eAAgB,SAACnC,EAA+BgB,GAAhC,OACZC,IAAOjB,EAAO,CACV6B,eAAgB,CAACX,KAAMF,EAAOG,eAKjCiB,EACT,SAAApC,GAAK,OAAIA,EAAMqC,GAAGC,OAAOC,wBAEtBjB,EAAoBd,EAApBc,QAASC,EAAWf,EAAXe,QACFO,EAAwGR,EAAxGQ,iBAAkBC,EAAsFT,EAAtFS,eAAgBC,EAAsEV,EAAtEU,iBAAkBC,EAAoDX,EAApDW,eAAgBC,EAAoCZ,EAApCY,iBAAkBC,EAAkBb,EAAlBa,eAErFI,EADgBhB,E,sBC/ClBiB,GAFRxD,QAAWA,OAAeyD,sCAAyCC,IAEnDC,YAAe,CAChCpB,QCROqB,YAAgB,CACnBP,GCAGO,YAAgB,CACfC,SCFDD,YAAgB,CACnBE,kBAAmBC,IDEfT,OEHDM,YAAgB,CACnBL,uBAAwBA,QJQ5BS,eKXO,GLYPC,WAAY,CAACC,KACbC,UAAUC,KAKDC,EAAiB,kBAAMC,e,mjBMhB7B,IAAMC,EAAcC,4BAAH,IACpBC,a,mCCLSC,EAAwB,CACjCC,IAAK,CACDC,OAAQ,CACJC,KAAM,CACFC,MAAO,UACPC,UAAW,UACXC,WAAY,UACZC,SAAU,UACVC,UAAW,UACXC,WAAY,UACZC,SAAU,WAEdC,QAAS,CACLP,MAAO,UACPQ,MAAO,GACPC,KAAM,GACNC,MAAO,CACHC,KAAM,GACNC,MAAO,GACPC,OAAQ,IAEZC,MAAO,CACHH,KAAM,GACNC,MAAO,GACPC,OAAQ,IAEZE,MAAO,CACHJ,KAAM,GACNC,MAAO,GACPC,OAAQ,IAEZG,MAAO,CACHL,KAAM,GACNC,MAAO,GACPC,OAAQ,IAEZI,OAAQ,CACJN,KAAM,GACNC,MAAO,GACPC,OAAQ,IAEZK,QAAS,CACLP,KAAM,GACNC,MAAO,GACPC,OAAQ,IAEZM,QAAS,CACLR,KAAM,GACNC,MAAO,GACPC,OAAQ,IAEZO,IAAK,CACDT,KAAM,GACNC,MAAO,GACPC,OAAQ,IAEZQ,OAAQ,CACJV,KAAM,GACNC,MAAO,GACPC,OAAQ,MAIpBS,KAAM,SACNC,MAAO,CACHC,OAAS,GACTC,aAAc,GACdC,kBAAoB,GACpBC,OAAS,IAEbC,KAAO,OChEf,ICmJuCC,ECzJ3BC,EFSGC,GCgJwBF,EDnJH,eAC7BjC,GCmJIoC,YAAe,2BACfH,GACAjC,KE5IIqC,GAVD,SAAC,GAAD,IAAEC,EAAF,EAAEA,SAAF,OACV,cAACC,EAAA,EAAD,CAAgBC,aAAW,EAA3B,SACI,cAAC,IAAD,CAAkBL,MAAOA,EAAzB,SACI,cAAC,gBAAD,CAAeA,MAAOA,EAAtB,SACKG,U,SDVLJ,O,iBAAAA,I,yBAAAA,I,2BAAAA,I,uBAAAA,I,yBAAAA,I,2BAAAA,I,wBAAAA,M,qCEICO,GAAmB,eAACC,EAAD,uDAAe,GAAf,OAChC,SACIC,GAAK,OAAIC,aAAK,CAAC,QAAS,OAAX,oBAAqBF,IAAOC,KAEhCE,GAAa,SAACC,GAAD,OAAsBL,GAAS,CAAC,SAAU,OAAQP,EAAYY,MAI3EC,GAAW,SAACD,GAAD,OAAiBL,GAAS,CAAC,QAASK,KCN/CE,GAAOC,UAAO9C,KAAV,+DAAG8C,CAAH,iFAEU,SAAAN,GAAK,OAAII,GAAS,SAATA,CAAmBJ,GAASI,GAAS,SAATA,CAAmBJ,GAASI,GAAS,oBAATA,CAA8BJ,MAErH,SAAAA,GAAK,OAAIA,EAAMR,MAAMe,YAAYC,KAAK,SACjB,SAAAR,GAAK,OAAII,GAAS,eAATA,CAAyBJ,KAE5CE,GAAWX,EAAY1B,Y,sECR1B4C,GAAuBH,UAAOI,IAAV,kFAAGJ,CAAH,iIACnBJ,GAAWX,EAAY5B,YAC3ByC,GAAS,WCiBJO,wBAfiC,SAACC,GAAO,IAC7CC,EAAKC,eAALD,EACP,OACI,cAACJ,GAAD,UACI,cAACM,GAAA,EAAD,CAASC,MAAOH,EAAE,gBAAlB,SACI,cAACI,GAAA,EAAD,CAAYC,KAAM,QACNC,MAAO,UACPC,MAAO,CAACC,WAAY,IAFhC,SAGI,cAAC,KAAD,CAAmBD,MAAO,CAACD,MAAO,QAASG,SAAU,e,6DCgD1DX,wBAlDuC,SAACX,GAAW,IACvDa,EAAKC,eAALD,EACDU,EAAWvE,IACjB,OACI,gCACI,eAAC,WAAD,WACI,uBACImE,MAAM,UACNK,KAAK,OACLC,SAAU,SAACC,GAAO,IAAD,EACbA,EAAEC,iBACF,IAAMC,EAAU,UAAGF,EAAEG,OAAOC,aAAZ,aAAG,EAAiB,GAChCF,QAAiBG,IAATH,GACRL,EAAS7G,EAAmBkH,KAGpCI,GAAG,mBACHZ,MAAO,CAACa,QAAS,UACrB,cAAClB,GAAA,EAAD,CAASC,MAAOH,EAAE,8BAAlB,SACI,uBAAOqB,QAAQ,mBAAf,SACI,cAACjB,GAAA,EAAD,CACIkB,UAAU,OACVjB,KAAK,QACLC,MAAM,UAHV,SAII,cAAC,KAAD,CAAiBC,MAAO,CAACD,MAAO,oBAKhD,cAACJ,GAAA,EAAD,CAASC,MAAOH,EAAE,kCAAlB,SACI,cAACI,GAAA,EAAD,CAAYC,KAAM,QACNC,MAAO,UACPiB,QAAS,kBACLb,EAASxG,MACbqG,MAAO,CAACiB,cAAe,SAAUhB,WAAY,GAJzD,SAKI,cAAC,KAAD,CAAaD,MAAO,CAACD,MAAO,eAGpC,cAACJ,GAAA,EAAD,CAASC,MAAOH,EAAE,qBAAlB,SACI,cAACI,GAAA,EAAD,CAAYC,KAAM,QACNC,MAAO,UACPiB,QAAS,kBAAM,MACfhB,MAAO,CAACiB,cAAe,SAAUhB,WAAY,GAHzD,SAII,cAAC,KAAD,CAAcD,MAAO,CAACD,MAAO,qBCrDpCmB,GAAQhC,UAAOI,IAAV,+DAAGJ,CAAH,yHACJJ,GAAWX,EAAY5B,YAC3ByC,GAAS,sB,+BCDNmC,GAAajC,kBAAOkC,MAAV,oEAAGlC,CAAH,0BACHJ,GAAWX,EAAY5B,aAG9B8E,GAAkBnC,kBAAOkC,MAAV,yEAAGlC,CAAH,0BACRJ,GAAWX,EAAY7B,YAG9BgF,GAAiBpC,kBAAOkC,MAAV,wEAAGlC,CAAH,oFACPJ,GAAWX,EAAY7B,YAO9BiF,GAAerC,kBAAOsC,MAAV,sEAAGtC,CAAH,eAChBJ,GAAWX,EAAY9B,QCPjBkD,wBATuC,SAACX,GACnD,OACI,eAACsC,GAAD,WACI,cAAC,GAAD,IACA,cAACI,GAAD,CAAgBG,YAAY,mBCN3BC,GAAkBxC,UAAOI,IAAV,6EAAGJ,CAAH,iCACdJ,GAAWX,EAAY5B,YAC3ByC,GAAS,WCKJO,wBAPgC,SAACX,GAC5C,OACI,cAAC8C,GAAD,O,iECuBOC,GAzBdC,uB,eAIG,aAAe,0BAFLC,aAA0C,IAAIC,KAAaA,a,uDAM3DC,EAAexI,GACSyI,KAAKH,aAAaI,UAAUF,GACtBG,KAAI,SAAAC,GAAC,OAAIA,EAAElJ,QAAMmJ,SAAS7I,EAAON,OAGjE+I,KAAKH,aAAaQ,YAAYN,EAAOxI,K,kCAGjCwI,EAAexI,GACvByI,KAAKH,aAAaS,eAAeP,EAAOxI,K,2BAGvCwI,EAAeQ,GAChBP,KAAKH,aAAaW,KAAKT,EAAO,CAACQ,Q,UCpBlBE,G,kDACTC,QAAyB,K,KACzBC,OAAuB,K,KACvBC,QAAkC,K,KAClCC,OAAuB,K,KACvBC,mBAA+C,K,+DAGnD,OAAOd,KAAKc,oB,aAEMP,GAClBP,KAAKc,mBAAqBP,I,4BAG1B,OAAOP,KAAKa,Q,aAGNN,GACNP,KAAKa,OAASN,I,6BAId,OAAOP,KAAKY,S,aAGLL,GACPP,KAAKY,QAAUL,I,4BAIf,OAAOP,KAAKW,Q,aAGNJ,GACNP,KAAKW,OAASJ,I,2BAGPA,GACPP,KAAKU,QAAUH,G,eAIf,OAAOP,KAAKU,Y,KCpCLK,GATdnB,uB,sDAEWe,OAAuB,IAAIF,G,mDAG/B,OAAOT,KAAKW,W,8BCNCK,G,uTCKb,OAAOC,OAAOC,IAAI,W,MCHXC,GAJQ,CACnBH,wBAAyBC,OAAOC,IAAI,4BCMnBE,GADpBxB,uB,8GAEmByB,GACZ,OAAQA,GACJ,KAAKF,GAAiBH,wBAClB,OAAO,IAAIA,GAEf,QACI,MAAM,IAAIM,MAAM,+B,uCAIXD,M,qCAGFA,GACX,OAAO,M,UCtBFE,GAA+BN,OAAOC,IAAI,wBAC1CM,GAA4BP,OAAOC,IAAI,mBACvCO,GAAgCR,OAAOC,IAAI,yBCOlDQ,GAAM,IAAIC,aAAU,CACtBC,oBAAoB,EACpBC,aAAc,YACdC,qBAAqB,IAGzBJ,GAAIK,KAAsBP,IAAmBQ,GAAGrC,IAAUsC,mBAC1DP,GAAIK,KAA0BN,IAAuBO,GAAGZ,IAAsBa,mBAC9EP,GAAIK,KAAkBR,IAAsBS,GAAGjB,IAAakB,mBAE7CP,UCZA,SAASQ,GAAWC,EAAwB/F,GACvD,IAAMgG,EAAuB,IAAIC,SAAcF,GAGzCpE,ECXc,SAACuE,GAGrBA,EAAMA,EAAIC,QADW,oCACa,SAASC,EAAGC,EAAGC,EAAGC,GAChD,OAAOF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,KAE/B,IAAMC,EAAS,4CAA4CC,KAAKP,GAChE,OAAOM,EAAS,CACZH,EAAGK,SAASF,EAAO,GAAI,IACvBF,EAAGI,SAASF,EAAO,GAAI,IACvBD,EAAGG,SAASF,EAAO,GAAI,KACvB,KDAUG,CADGjG,GAAWX,EAAYzB,WAAvBoC,CAAmC,CAACV,WAcrD,OAZG2B,GAAmB,OAAVA,IACRqE,EAAMY,WAAa,IAAIX,UAAetE,EAAM0E,EAAI,IAAK1E,EAAM2E,EAAI,IAAK3E,EAAM4E,EAAI,IAAK,IEV5E,SAAmBM,EAA4BnF,GAE1D,IAAMoF,EAAgB,SAAUC,EAAcpF,EAAeD,EAAcsE,GACvE,IAAMgB,EAAiB,IAAIf,kBAAuB,iBAAkB,GAAID,GAAO,GAC/EgB,EAAeC,UAAW,EAC1BD,EAAeE,SAASH,EAAM,EAAG,GAAI,kBAAmBpF,EAAO,eAAe,GAC9E,IAAMwF,EAAQC,EAAKC,YAAY,YAAa3F,EAAMsE,GAAO,GACrDsB,EAAsC,IAAIrB,oBAAyB,oBAAqBD,GAK5F,OAJAsB,EAAiBC,cAAgB,IAAItB,UAAe,EAAG,EAAG,GAC1DqB,EAAiBE,eAAiBR,EAClCG,EAAMM,SAAWH,EACjBH,EAAMM,SAASC,iBAAkB,EAC1BP,GAGLC,EAAOnB,QAECmB,EAAKO,YAAY,QAAS,CACpC1B,WAAgB2B,OAAQ,IAAI3B,WAAgBvE,EAAM,EAAG,GAAI,IAAIuE,WAAuB,IAAPvE,EAAa,IAAOA,EAAM,GACvG,IAAIuE,WAAgBvE,EAAM,EAAG,GAAI,IAAIuE,WAAuB,IAAPvE,GAAc,IAAOA,EAAM,IACjFmF,GACGlF,MAAQ,IAAIsE,UAAe,EAAG,EAAG,GACzBa,EAAc,IAAK,MAAOpF,EAAO,GAAImF,GAC7CgB,SAAW,IAAI5B,WAAgB,GAAMvE,GAAO,IAAOA,EAAM,GACjD0F,EAAKO,YAAY,QAAS,CACpC1B,WAAgB2B,OAAQ,IAAI3B,WAAgB,EAAGvE,EAAM,GAAI,IAAIuE,YAAiB,IAAOvE,EAAa,IAAPA,EAAa,GACxG,IAAIuE,WAAgB,EAAGvE,EAAM,GAAI,IAAIuE,WAAgB,IAAOvE,EAAa,IAAPA,EAAa,IAChFmF,GACGlF,MAAQ,IAAIsE,UAAe,EAAG,EAAG,GACzBa,EAAc,IAAK,QAASpF,EAAO,GAAImF,GAC/CgB,SAAW,IAAI5B,WAAgB,EAAG,GAAMvE,GAAO,IAAOA,GAC9C0F,EAAKO,YAAY,QAAS,CACpC1B,WAAgB2B,OAAQ,IAAI3B,WAAgB,EAAG,EAAGvE,GAAO,IAAIuE,WAAgB,GAAI,IAAOvE,EAAa,IAAPA,GAC9F,IAAIuE,WAAgB,EAAG,EAAGvE,GAAO,IAAIuE,WAAgB,EAAG,IAAOvE,EAAa,IAAPA,IACtEmF,GACGlF,MAAQ,IAAIsE,UAAe,EAAG,EAAG,GACzBa,EAAc,IAAK,OAAQpF,EAAO,GAAImF,GAC9CgB,SAAW,IAAI5B,WAAgB,EAAG,IAAOvE,EAAM,GAAMA,GFzB3DoG,CAAU9B,EAAO,GAEjBD,EAAOgC,eAAc,WACjB/B,EAAMgC,YAEV7O,OAAO8O,iBAAiB,UAAU,WAC9BlC,EAAOmC,YAGJlC,EGjBI,SAASmC,GAAUnC,EAAcD,EAAgBqC,GAC5D,IAAIC,EAAY,EACZC,EAA4B,KAEhCtC,EAAMuC,oBAAoBC,KAAI,SAACC,EAAUrH,GACrC,IAAMuC,EAAQ8E,EAAU9E,MAClB+E,EAA2F,GAAlFC,KAAKC,KAAK,EAAGD,KAAKE,IAAI,EAAIlF,EAAMmF,aAAenF,EAAMoF,QAAUpF,EAAMqF,UAChFN,EAAQ,GAAKL,EAAY,IAAMK,EAAQ,KACvCL,GAAaK,EAgBzB,SAAoBN,EAAiBM,EAAgBJ,GAGjD,GAAIA,EAAY,CACZ,IAAMW,EAASN,KAAKO,IAAId,EAAOe,UAAaf,EAAOgB,YAC7CC,EAASV,KAAKO,IAAId,EAAOkB,SAAYlB,EAAOmB,aAE5CC,EAAcH,EAASJ,EAInBQ,GADYrB,EAAOe,UAAab,EAAWoB,GACvBT,EAC1Bb,EAAOe,WAAcM,EAAQf,EAI7B,IACMe,GADYrB,EAAOgB,WAAcd,EAAWoB,GACxBT,EAC1Bb,EAAOgB,YAAeK,EAAQf,EAI9B,IACMe,GADYrB,EAAOkB,SAAYhB,EAAWqB,GACtBN,EAC1BjB,EAAOkB,UAAaG,EAAQf,EAAQc,EAIpC,IACMC,GADYrB,EAAOmB,YAAejB,EAAWqB,GACzBN,EAC1BjB,EAAOmB,aAAgBE,EAAQf,EAAQc,EAI1CpB,EAA2BwB,mBAAqB,KAAOjB,KAAKO,IAAID,EAAS,IAjDtEY,CAAWzB,EAAQM,EAAOJ,MAE/BrC,qBAA0B6D,cAC7B9D,EAAMuC,oBAAoBC,KAAI,WAC1BF,EAAarC,WAAgB8D,UACzB,IAAI9D,WAAgBD,EAAMgE,SAAUhE,EAAMiE,SAAU,GACpDlE,EAAOmE,iBACPnE,EAAOoE,kBACP/B,EAAOgC,iBACPhC,EAAOiC,gBACPjC,EAAOkC,yBAEZrE,qBAA0BsE,aCxB1B,IAAMC,GAAS1J,UAAO2J,OAAV,oEAAG3J,CAAH,iJAMd,SAAAN,GAAK,OAAIA,EAAMR,MAAMe,YAAY2J,GAAG,SACZ,SAAAlK,GAAK,OAAII,GAAS,SAATA,CAAmBJ,GAASI,GAAS,SAATA,CAAmBJ,GAASI,GAAS,oBAATA,CAA8BJ,MAEvH,SAAAA,GAAK,OAAIA,EAAMR,MAAMe,YAAYC,KAAK,SACd,SAAAR,GAAK,OAAII,GAAS,eAATA,CAAyBJ,M,uCCd1CmK,G,WAsCjB,WAAYjB,EAAWC,EAAWiB,EAAWC,GAAoB,0BApCzDC,GAAa,EAoC2C,KA3BxDC,GAAa,EA2B2C,KAlBxDC,GAAa,EAkB2C,KATxDC,WAAqB,EAUzBrH,KAAKkH,GAAKpB,EACV9F,KAAKmH,GAAKpB,EACV/F,KAAKoH,GAAKJ,EACVhH,KAAKqH,WAAaJ,E,+CAtClB,OAAOjH,KAAKkH,I,aAGV3G,GACFP,KAAKkH,GAAK3G,I,wBAKV,OAAOP,KAAKmH,I,aAGV5G,GACFP,KAAKmH,GAAK5G,I,wBAKV,OAAOP,KAAKoH,I,aAGV7G,GACFP,KAAKoH,GAAK7G,I,gCAKV,OAAOP,KAAKqH,Y,aAGF9G,GACVP,KAAKqH,WAAa9G,M,KCnCX,SAAS+G,GAAuBC,GAS3C,IARA,IAAMC,EAAcD,EAAME,OACpBC,EAAkB,MACpBC,EAAe,EACfC,EAAmB,EACnBC,EAAgBH,EAChBI,EAAW,EACXC,EAAW,IAEF,CACT,IAAMC,EAAYT,EAAMxQ,MAAM6Q,EAAkBC,GAE5C5C,EAAMF,KAAKE,IAAL,MAAAF,KAAI,aAAQiD,IAClBhD,EAAMD,KAAKC,IAAL,MAAAD,KAAI,aAAQiD,IAStB,GAPAF,EAAW7C,EAAM6C,EAAW7C,EAAM6C,EAClCC,EAAW/C,EAAM+C,EAAW/C,EAAM+C,EAElCH,GAAoBF,EACpBG,GAAiBH,GACjBC,GAAgBK,EAAUP,SAEND,EAChB,MAGR,MAAO,CAACvC,IAAK6C,EAAU9C,IAAK+C,GC1BzB,IAAME,GAAsB,gBACtBC,GAAyB,yBACzBC,GAAqB,qBACrBC,GAA2B,2BCazB,SAAeC,GAA9B,2C,gDAAe,WAAmCjG,EACAkG,EACAC,EACAC,EACAC,GAJnC,wBAAAC,EAAA,6DAOLC,EAA+BC,GAAiBN,EAAOG,GACvDI,EAAoB,IAAIxG,qBAA0B,MAAO,EAAGD,EAAO,CAAC0G,WAAW,IAE/EC,EAAQP,EAAeD,EACzBS,EAAoB,SAACC,EAAoBC,EAAW1L,GACpD,IAAI2L,EAAQR,EAAeO,GACrBE,GAAaD,EAAMlC,UAAYsB,GAAgBQ,EAAS,IAE1DtG,EAAY,EACZC,EAAY,EACZC,EAAY,EAEZyG,GAAY,GACZ3G,EAAI,EACJC,EAAI,EACJC,EAAI,GACGyG,EAAW,GAAKA,GAAY,IACnC3G,EAAI,IACJC,EAAI,EAAK,MAAyB,EAAI0G,GACtCzG,EAAI,GACGyG,EAAW,IAAMA,GAAY,IACpC3G,EAAI,MAAO,MAA0B,GAAK2G,GAC1C1G,EAAI,IACJC,EAAI,GACGyG,EAAW,IAAMA,GAAY,IACpC3G,EAAI,EACJC,EAAI,IACJC,EAAI,EAAK,KAA2B,GAAKyG,IAClCA,EAAW,IAAMA,GAAY,KACpC3G,EAAI,EACJC,EAAI,MAAO,MAA2B,GAAK0G,GAC3CzG,EAAI,KACGyG,EAAW,MAClB3G,EAAI,EACJC,EAAI,EACJC,EAAI,GAIRsG,EAAShF,SAAW,IAAI5B,WAAgB8G,EAAMrD,EAAGqD,EAAMpD,EAAGoD,EAAMnC,GAChEiC,EAASlL,MAAQ,IAAIsE,UAAeI,EAAI,IAAKC,EAAI,IAAKC,EAAI,IAAK,IAG7D0G,EAAcV,EAAelB,OACnCoB,EAAkBS,UAAUD,EAAaL,GAnD9B,SAoDQH,EAAkBU,iBApD1B,uCAqDJV,GArDI,6C,sBAyGf,SAASD,GAAiBN,EAAsBG,GAe5C,OAduBH,EAAOkB,QAAO,SAAAL,GAAU,IACpCrD,EAAWqD,EAAXrD,EAAGC,EAAQoD,EAARpD,EAAGiB,EAAKmC,EAALnC,EAEb,OAAKlB,GAAK2C,EAAkB1Q,kBAAoB+N,GAAK2C,EAAkBzQ,gBAElE+N,GAAK0C,EAAkBxQ,kBAAoB8N,GAAK0C,EAAkBvQ,gBAElE8O,GAAKyB,EAAkBtQ,kBAAoB6O,GAAKyB,EAAkBrQ,kBC/HxE,ICFKqR,GDECC,GAAsBxM,UAAOI,IAAV,gFAAGJ,CAAH,8HEW1ByM,GAAeC,aAAe,CAACjR,EAFmC,SAAApC,GAAK,OAAIA,EAAMqC,GAAGQ,SAASC,kBAAkBjC,mBAGjH,SAACyS,EAA2CrL,GACxC,MAAO,CACHqL,oBACArL,WAiBGsL,GAbI,WACf,IAAMlN,EAAQmN,YAAYJ,IACpBlB,EAAoB7L,EAAMiN,kBAC1BG,EAAiBpN,EAAM4B,KAK7B,OAHIwL,GAAqC,OAAnBA,GH8CnB,SAAyBxL,EAAYiK,GACxC,IAAMwB,EAAqB,IAAIC,WAE/BD,EAAOE,OAAP,yCAAgB,WAAO7L,GAAP,4CAAAoK,EAAA,6DACN0B,EAAsB,GACEH,EAAOrH,OACVyH,MAAM,MAC3BC,SAAQ,SAACC,GACXH,EAAUI,KAAKD,EAAKxT,MAAM,GAAI,OAG5BuR,EAAuB8B,EAAUlK,KAAI,SAACqK,GACxC,IAAMjC,EAAmBiC,EAAKF,MAAM,KAC9BvE,EAAY2E,OAAOC,WAAWpC,EAAO,GAAKA,EAAO,GAAG/F,QAAQ,IAAK,KAAO,KACxEwD,EAAY0E,OAAOC,WAAWpC,EAAO,GAAKA,EAAO,GAAG/F,QAAQ,IAAK,KAAO,KACxEyE,EAAYyD,OAAOC,WAAWpC,EAAO,GAAKA,EAAO,GAAG/F,QAAQ,IAAK,KAAO,KACxEoI,EAAYF,OAAOnC,EAAO,GAAKA,EAAO,GAAG/F,QAAQ,IAAK,KAAO,KAEnE,OAAO,IAAIwE,GAAWjB,EAAGC,EAAGiB,EAAG2D,MAG7BC,EAAatC,EAAOpI,KAAI,SAAAyK,GAAC,OAAIA,EAAE1D,aAlBzB,EAmBOK,GAAuBsD,GAAnC5F,EAnBK,EAmBLA,IAAKC,EAnBA,EAmBAA,IACNsD,EAAetD,EACfuD,EAAexD,EAEf6F,EAA2BnJ,GAAIoJ,IAAI7J,OAAOC,IAAI,yBAC9CkB,EAAQyI,EAAYzI,MAAMA,OAE1B2I,EAAeF,EAAYzI,OAChByG,mBAA6D,OAAxCgC,EAAYzI,MAAMyG,oBACpDkC,EAAalC,kBAAkBmC,UAC/BD,EAAalC,kBAAoB,MA7BzB,UAgCoBR,GAAoBjG,EAAOkG,EAAQC,EAAcC,EAAcC,GAhCnF,QAgCNI,EAhCM,OAiCNoC,EAjCM,UAiCYJ,EAAYzI,MAAMyG,yBAjC9B,aAiCY,EAAqCrF,KAC7DqH,EAAYzI,MAAMyG,kBAAoBA,EAEhCqC,EAAWxJ,GAAIoJ,IAAqBtJ,IAEvCyJ,IAAoBpC,EAAkBrF,MAASyH,GAC9CC,EAASC,KAAKlD,GAAqB,CAACmD,QAASC,IAAQ5N,EAAE,qCAAsC6N,UAAW,YAvChG,4CAAhB,sDA0CA,IAAMC,EAAmB/M,EACzByL,EAAOuB,WAAWD,GG3FdE,CAAgBzB,EAAgBvB,GAGhC,cAACiB,GAAD,K,8BCxBKgC,GAAiBxO,UAAOyO,QAAV,wEAAGzO,CAAH,mGACjB,SAAAN,GAAK,OAAIA,EAAMgP,SACd,SAAAhP,GAAK,OAAIA,EAAMiP,SACX/O,GAAWX,EAAY7B,YAGvB,SAAAsC,GAAK,OAAIA,EAAMzF,SAAN,sBAGX2U,GAAuB5O,UAAO6O,OAAV,8EAAG7O,CAAH,MAGpB8O,GAAc9O,UAAOI,IAAV,qEAAGJ,CAAH,+HAEVJ,GAAWX,EAAYxB,UAG5BmC,GAAWX,EAAY9B,QAKnB4R,GAAkB/O,UAAOI,IAAV,yEAAGJ,CAAH,gEAMfgP,GAAwBhP,kBAAOiP,MAAV,+EAAGjP,CAAH,MAGrBkP,GAAqBlP,UAAOI,IAAV,4EAAGJ,CAAH,kBClClBmP,GAA+BnP,UAAOI,IAAV,sFAAGJ,CAAH,sB,oBCkBnCyM,GAAeC,aACjB,CAACjR,IACD,SAAC6Q,GAAD,MAAqC,CACjCA,OAASA,MA4HFjM,wBAxH4C,SAACX,GACxD,IAAMuB,EAAWvE,IACV6D,EAAKC,eAALD,EAED+L,EADOO,YAAYJ,IACLH,OAEpB,OACI,eAAC4C,GAAD,WACI,eAACC,GAAD,WACI,cAACC,GAAA,EAAD,CACIC,MAAO9O,EAAE,sBACTW,KAAK,SACLnH,KAAM,SACNuV,KAAK,MACLjM,MAAOiJ,EAAOzR,iBACdsG,SAAU,SAAA0B,GACN,IAAMQ,EAAQR,EAAMtB,OAAO8B,MACvBkM,aAAUlM,IACVpC,EAAS9F,EAAiBkI,KAElCvC,MAAO,CAAC4N,MAAO,IAAKC,OAAQ,IAC5Ba,gBAAiB,CACbC,QAAQ,GAEZC,WAAY,CACRJ,KAAM,IAEVK,QAAQ,aAEZ,cAACP,GAAA,EAAD,CACI1N,GAAG,kBACH2N,MAAO9O,EAAE,oBACTW,KAAK,SACLnH,KAAM,OACNuV,KAAK,MACLjM,MAAOiJ,EAAOxR,eACdqG,SAAU,SAAA0B,GAAK,OAAI5B,EAAS7F,EAAeyH,EAAMtB,OAAO8B,SACxDvC,MAAO,CAAC4N,MAAO,IAAK3N,WAAY,IAChCyO,gBAAiB,CACbC,QAAQ,GAEZC,WAAY,CACRJ,KAAM,IAEVK,QAAQ,gBAEhB,eAACR,GAAD,WACI,cAACC,GAAA,EAAD,CACI1N,GAAG,kBACH2N,MAAO9O,EAAE,sBACTW,KAAK,SACLnH,KAAM,SACNuV,KAAK,MACLjM,MAAOiJ,EAAOvR,iBACdoG,SAAU,SAAA0B,GAAK,OAAI5B,EAAS5F,EAAiBwH,EAAMtB,OAAO8B,SAC1DvC,MAAO,CAAC4N,MAAO,IAAKC,OAAQ,IAC5Ba,gBAAiB,CACbC,QAAQ,GAEZC,WAAY,CACRJ,KAAM,IAEVK,QAAQ,aAEZ,cAACP,GAAA,EAAD,CACI1N,GAAG,kBACH2N,MAAO9O,EAAE,oBACTW,KAAK,SACLnH,KAAM,OACNuV,KAAK,MACLjM,MAAOiJ,EAAOtR,eACdmG,SAAU,SAAA0B,GAAK,OAAI5B,EAAS3F,EAAeuH,EAAMtB,OAAO8B,SACxDvC,MAAO,CAAC4N,MAAO,IAAK3N,WAAY,IAChCyO,gBAAiB,CACbC,QAAQ,GAEZC,WAAY,CACRJ,KAAM,IAEVK,QAAQ,gBAEhB,eAACR,GAAD,WACI,cAACC,GAAA,EAAD,CACI1N,GAAG,kBACH2N,MAAO9O,EAAE,sBACTW,KAAK,SACLnH,KAAM,SACNuV,KAAK,MACLjM,MAAOiJ,EAAOrR,iBACdkG,SAAU,SAAA0B,GAAK,OAAI5B,EAAS1F,EAAiBsH,EAAMtB,OAAO8B,SAC1DvC,MAAO,CAAC4N,MAAO,IAAKC,OAAQ,IAC5Ba,gBAAiB,CACbC,QAAQ,GAEZC,WAAY,CACRJ,KAAM,IAEVK,QAAQ,aAEZ,cAACP,GAAA,EAAD,CACI1N,GAAG,kBACH2N,MAAO9O,EAAE,oBACTW,KAAK,SACLnH,KAAM,OACNuV,KAAK,MACLjM,MAAOiJ,EAAOpR,eACdiG,SAAU,SAAA0B,GAAK,OAAI5B,EAASzF,EAAeqH,EAAMtB,OAAO8B,SACxDvC,MAAO,CAAC4N,MAAO,IAAK3N,WAAY,IAChCyO,gBAAiB,CACbC,QAAQ,GAEZC,WAAY,CACRJ,KAAM,IAEVK,QAAQ,sBCtHtBlD,GAAeC,aAAe,ChDchC,SAAArT,GAAK,OAAIA,EAAMqC,GAAGQ,SAASC,kBAAkBlC,YgDd6B,SAACA,GAAD,MACzE,CACGA,SAAWA,MAyCJoG,wBArCqC,SAACX,GACjD,IAAMuB,EAAWvE,IACV6D,EAAKC,eAALD,EACDqP,EAAO/C,YAAYJ,IAEzB,OACI,cAAC,KAAD,CAAWoD,OAAO,SAASC,OAAO,SAASC,gBAAiB,CAACnH,EAAG,GAAIC,EAAG,IAAvE,SACI,cAAC2F,GAAD,CAAgBvU,SAAU2V,EAAK3V,SAAUyU,MAAO,IAAKC,OAAQ,IAA7D,SACI,oCACI,cAACC,GAAD,UACI,eAACE,GAAD,WACI,cAACC,GAAD,UACI,cAACC,GAAD,CAAuBW,QAAQ,YAA/B,SAA4CpP,EAAE,2BAElD,cAACE,GAAA,EAAD,CAASC,MAAOH,EAAE,SACTO,MAAO,CACHkP,MAAO,SAFpB,SAII,gCACI,cAACrP,GAAA,EAAD,CACIkB,UAAU,OACVjB,KAAK,QACLkB,QAAS,kBAAMb,EAASvG,MACxBmG,MAAM,UAJV,SAKI,cAACwB,GAAD,eAMpB,cAAC,GAAD,cCxDP4N,GAAkBjQ,UAAOI,IAAV,yEAAGJ,CAAH,mHAED,SAAAN,GAAK,OAAII,GAAS,SAATA,CAAmBJ,GAASI,GAAS,SAATA,CAAmBJ,GAASI,GAAS,oBAATA,CAA8BJ,MCQ3GW,wBAR4B,SAACX,GACxC,OACI,cAACuQ,GAAD,UACI,cAAC,GAAD,SCoDG5P,wBA3C2B,SAACX,GACvC,SAASwQ,EAAWvG,ICnBT,WACX,IAAMwG,EAAOC,SAASC,cAAc,UACpC,SAAUF,EAAKG,aAAcH,EAAKG,WAAW,QDkBpCC,KACDhX,QAAQC,IAAI,4BACZgX,MAAM,6BAEV,IACMC,EAD2BjM,GAAIoJ,IAAI7J,OAAOC,IAAI,yBACnBkB,MAE3BD,EAAiB,IAAIE,UAAewE,GAAQ,GAClD8G,EAAaxL,OAASA,EAEtB,IACMC,EAAuBF,GAAWC,EAD1BvF,EAAMR,OAEpBuR,EAAavL,MAAQA,EAErB,IAAMoC,EE/BC,SAAqBqC,EAA2BzE,GAC3D,IAAMoC,EAA0B,IAAInC,mBAAwB,SAAU,EAAG,GAAI,IAAK,IAAIA,WAAgB,EAAG,GAAI,GAAID,GAEjHoC,EAAOoJ,YAAY,IAAIvL,WAAgB,EAAG,GAAI,MAC9CmC,EAAO/F,OAAS,IAAI4D,WAAgB,EAAG,EAAG,GAC1CmC,EAAOe,WAAa,EACpBf,EAAOgB,WAAa,EACpB,IAAMK,EAAQgB,EAAOgF,OAAShF,EAAO+E,MAWrC,OAVApH,EAAOkB,SAAWlB,EAAOgB,WAAaK,EACtCrB,EAAOmB,YAAcnB,EAAOe,UAAYM,EAExCrB,EAAOqJ,cAAchH,GAAQ,GAC7BrC,EAAOsJ,OAAS/I,KAAKgJ,GACrBvJ,EAAOqJ,cAAchH,GAAQ,GAAM,EAAO,GAC1CrC,EAAOwJ,KAAO3L,UAAe4L,oBAE7BzJ,EAAO0J,iBAAmB1J,EAAO2J,OACjC3J,EAAO4J,iBAAmB5J,EAAO2J,OAC1B3J,EFa6B6J,CAAYxH,EAAQzE,GACpDuL,EAAanJ,OAASA,EAEtB,IAAMvJ,EGlCC,SAAoBmH,GAC/B,IAAMnH,EAAQ,IAAIoH,oBAAyB,QAAS,IAAIA,WAAgB,EAAG,EAAG,GAAID,GAGlF,OAFAnH,EAAMqT,UAAY,GAEXrT,EH8BkBsT,CAAWnM,GAChCuL,EAAa1S,MAAQA,EAErBsJ,GAAUnC,EAAOD,EAAQqC,GAI7B,OACI,gCACI,cAACoC,GAAD,CACI4H,IAAK,SAAA3H,QACalI,GAAVkI,GAAuBA,GACvBuG,EAAWvG,MAIvB,cAAC,GAAD,IACA,cAAC4H,GAAA,EAAD,CAAQC,QAAM,EAAd,SACI,cAAC,GAAD,Y,SIlDHC,GAA6BzR,UAAOI,IAAV,wFAAGJ,CAAH,4CACzBJ,GAAWX,EAAY7B,WAC3B0C,GAAS,iB,6KZPPyM,O,eAAAA,I,4BAAAA,Q,KasBZ,IAwEelM,wBAxEwC,SAACC,GAAO,IACpDC,EAAKC,eAALD,EACDU,EAAWvE,IAFyC,EAIhCgV,mBAAS,CAC/BC,eAAe,IALuC,oBAInDtY,EAJmD,KAI5CuY,EAJ4C,KAOnDD,EAAiBtY,EAAjBsY,cAMDE,EAAwC,WAC1C,IAAM7D,EAAWxJ,GAAIoJ,IAAqBtJ,IAC1C0J,EAASC,KAAK/C,GAAyB,CAAC4G,YAAavF,GAAwBK,aAC7EoB,EAASC,KAAKhD,GAAmB,KAGrC,OACI,eAAC,IAAM8G,SAAP,WACI,eAACC,GAAA,EAAD,CAAUC,QAAM,EAACnQ,QAZL,WAChB8P,EAAS,CAACD,eAAgBA,KAWtB,UACI,cAACO,GAAA,EAAD,UACI,cAAC,KAAD,MAEJ,cAACC,GAAA,EAAD,CAAcC,QAAS7R,EAAE,iBACxBoR,EAAgB,cAACU,GAAA,EAAD,IAAgB,cAACC,GAAA,EAAD,OAErC,cAACC,GAAA,EAAD,CAAUC,GAAIb,EAAec,QAAQ,OAAOC,eAAa,EAAzD,SACI,eAACC,GAAA,EAAD,CAAM9Q,UAAU,MAAM+Q,gBAAc,EAApC,UACI,cAACZ,GAAA,EAAD,CAAUC,QAAM,EAACnR,MAAO,CAAC+R,YAAa,IAAtC,SACI,eAAC,WAAD,WACI,uBACIhS,MAAM,UACNK,KAAK,OACLC,SAAU,SAACC,GAAO,IAAD,EACbA,EAAEC,iBACF,IAAMC,EAAU,UAAGF,EAAEG,OAAOC,aAAZ,aAAG,EAAiB,GAChCF,QAAiBG,IAATH,IACSkD,GAAIoJ,IAAqBtJ,IACjC2J,KAAKhD,GAAmB,IACjChK,EAAS7G,EAAmBkH,MAGpCI,GAAG,mBACHZ,MAAO,CAACa,QAAS,UACrB,uBAAOC,QAAQ,mBAAf,SACI,cAACsQ,GAAA,EAAD,UACI,cAAC,KAAD,QAGR,uBAAOtQ,QAAQ,mBAAf,SACI,cAACuQ,GAAA,EAAD,CAAcC,QAAS7R,EAAE,uCAKrC,eAACyR,GAAA,EAAD,CAAUC,QAAM,EAACnR,MAAO,CAAC+R,YAAa,IAAtC,UACI,cAACX,GAAA,EAAD,CACIpQ,QAAS+P,EADb,SAEI,cAAC,KAAD,MAEJ,cAACM,GAAA,EAAD,CACIrQ,QAAS+P,EACTO,QAAS7R,EAAE,kDChF1BuS,GAAkB9S,UAAOyO,QAAV,6EAAGzO,CAAH,kBAGf+S,GAAe/S,UAAOI,IAAV,0EAAGJ,CAAH,8GAId,SAAAN,GAAK,OAAIA,EAAMR,MAAM8T,QAAQ,EAAG,MAEzC,SAAAtT,GAAK,OAAIA,EAAMR,MAAMe,YAAY2J,GAAG,SAGpC,SAAAlK,GAAK,OAAIA,EAAMR,MAAMe,YAAYC,KAAK,SAK3B+S,GAAoBjT,kBAAOiP,MAAV,+EAAGjP,CAAH,kDACpBJ,GAAWX,EAAYxB,WCgDlB4C,wBA9CqC,SAACX,GAAW,IACrDa,EAAKC,eAALD,EADoD,EAGjCmR,mBAAS,CAC/BwB,QAAQ,IAJ+C,oBAGpD7Z,EAHoD,KAG7CuY,EAH6C,KAMpDsB,EAAU7Z,EAAV6Z,OAEPC,qBAAU,WACFvB,EAAS,CAACsB,OAAQxT,EAAMwT,WACzB,CAACxT,EAAMwT,SAGd,IAAME,EAAoB,WACL5O,GAAIoJ,IAAqBtJ,IACjC2J,KAAKhD,GAAoB,KAGzBrL,GAAWX,EAAYxB,SAAvBmC,CAAiCF,GAE9C,OACI,cAAC2T,GAAA,EAAD,CAAQC,OAAO,OACPC,KAAML,EACNM,QAASJ,EAFjB,SAGI,eAACN,GAAD,WACI,eAACC,GAAD,WACI,cAACE,GAAD,CAAmBtD,QAAQ,KAA3B,SAAiCpP,EAAE,aACnC,cAACE,GAAA,EAAD,CAASC,MAAOH,EAAE,SAAlB,SACI,cAACI,GAAA,EAAD,CAAYmB,QAASsR,EAArB,SACI,cAAC,KAAD,CAAiBtR,QAASsR,WAItC,cAAClR,GAAA,EAAD,IACA,cAACyQ,GAAA,EAAD,CACI9Q,UAAU,MACV4R,kBAAgB,wBAChB3S,MAAO,CAAC4N,MAAO,QAHnB,SAKI,cAAC,GAAD,cC9DPgF,GAAwB1T,UAAOyO,QAAV,kFAAGzO,CAAH,wCAIrB2T,GAAqB3T,UAAOI,IAAV,+EAAGJ,CAAH,iGAKpB,SAAAN,GAAK,OAAIA,EAAMR,MAAM8T,QAAQ,EAAG,MAG9BY,GAAuB5T,UAAOI,IAAV,iFAAGJ,CAAH,qBACnB,SAAAN,GAEV,OAAQA,EAAMmU,aAAenU,EAAMoU,WAAapU,EAAMmU,YAAYE,YAAcrU,EAAMoU,UAAUC,UAAzF,wB,qBCfEC,GAAiChU,UAAOI,IAAV,4FAAGJ,CAAH,oDCW5BK,wBAR2C,SAACX,GACvD,OACI,cAACsU,GAAD,UACI,cAAC,GAAD,SCkEG3T,wBAxDuC,SAACX,GAAW,IACvDa,EAAKC,eAALD,EADsD,EAGnCmR,mBAAS,CAC/BwB,QAAQ,EACRe,aAAc1H,KAL2C,oBAGtDlT,EAHsD,KAG/CuY,EAH+C,KAOtDsB,EAAwB7Z,EAAxB6Z,OAAQe,EAAgB5a,EAAhB4a,aAEfd,qBAAU,WACN,IAAMnF,EAAWxJ,GAAIoJ,IAAqBtJ,IAG1C,OAFA0J,EAASkG,UAAUhJ,GAA0BiJ,GAEtC,WACHnG,EAASoG,YAAYlJ,GAA0BiJ,MAEpD,IAEH,IAAMA,EAAwB,SAACE,GAC3B,IAAMC,EAAUD,EAAO,GACvBzC,EAAS,CAACqC,aAAcK,EAAQxC,YAAaoB,QAAQ,KAGnDE,EAAoB,WACtBxB,EAAS,2BAAIvY,GAAL,IAAY6Z,QAAQ,MAGhC,OACI,cAACG,GAAA,EAAD,CAAQC,OAAO,SACPC,KAAML,EACNM,QAASJ,EAFjB,SAGI,eAACM,GAAD,WACI,eAACC,GAAD,WACI,qBAAK7S,MAAO,CAACyT,YAAa,QAA1B,SACI,cAACtF,GAAA,EAAD,CAAYU,QAAQ,KAApB,SACI,cAACiE,GAAD,CAAsBC,YAAatH,GAAwBK,WACrCkH,UAAWG,EADjC,SAEK1T,EAAE,6BAIf,cAACE,GAAA,EAAD,CAASC,MAAOH,EAAE,SAAlB,SACI,cAACI,GAAA,EAAD,CAAYmB,QAASsR,EAArB,SACI,cAAC,KAAD,CAAuBtR,QAASsR,WAI5C,cAACnR,GAAD,IACA,cAAC2R,GAAD,CAAsBC,YAAatH,GAAwBK,WAAYkH,UAAWG,EAAlF,SACI,cAAC,GAAD,c,qBCeL5T,wBA/DuC,SAACX,GAAW,IACvDa,EAAKC,eAALD,EADsD,EAGnCmR,mBAAS,CAC/B8C,cAAc,IAJ2C,oBAGtDnb,EAHsD,KAG/CuY,EAH+C,KAO7DuB,qBAAU,WACF,IAAMnF,EAAWxJ,GAAIoJ,IAAqBtJ,IAG1C,OAFA0J,EAASkG,UAAUjJ,GAAoBwJ,GACvC7C,EAAS,CAACsB,OAAQxT,EAAMwT,SACjB,WACHlF,EAASoG,YAAYnJ,GAAoBwJ,MAE9C,CAAC/U,EAAMwT,SAGd,IAAMuB,EAAqB,SAACnU,GACxBsR,EAAS,CAAC4C,cAAc,KAO5B,OACI,eAAC/C,GAAD,WACI,cAACiD,GAAA,EAAD,CAAQ3N,SAAS,SAAjB,SACI,eAAC4N,GAAA,EAAD,CAAS7T,MAAO,CAAC8T,WAAYlV,EAAMR,MAAMlC,IAAIC,OAAOC,KAAKG,YAAzD,UACI,cAACoD,GAAA,EAAD,CAASC,MAAOH,EAAE,QAAlB,SACI,cAACI,GAAA,EAAD,CAAYC,KAAM,SACNC,MAAO,UACPgU,aAAW,cACX/T,MAAO,CAACiB,cAAe,UACvBD,QAbF,WAC1B8P,EAAS,CAAC4C,cAAc,KAQR,SAKI,cAAC,KAAD,CAAU1T,MAAO,CAACD,MAAO,QAASG,SAAU,UAGpD,cAACiO,GAAA,EAAD,CAAYU,QAAQ,KAAK7O,MAAO,CAACa,QAAS,QAASmT,SAAU,EAAG/T,WAAY,IAA5E,2BAGA,cAACN,GAAA,EAAD,CAASC,MAAOH,EAAE,WAAlB,SACI,cAACI,GAAA,EAAD,CAAYC,KAAM,QACNC,MAAO,UACPC,MAAO,CAACC,WAAY,IAFhC,SAGI,cAAC,KAAD,CAAcD,MAAO,CAACD,MAAO,QAASG,SAAU,UAGxD,cAACP,GAAA,EAAD,CAASC,MAAOH,EAAE,gBAAlB,SACI,cAACI,GAAA,EAAD,CAAYC,KAAM,QACNC,MAAO,UACPC,MAAO,CAACC,WAAY,IAFhC,SAGI,cAAC,KAAD,CAAmBD,MAAO,CAACD,MAAO,QAASG,SAAU,eAKrE,cAAC,GAAD,CAAiBkS,OAAQ7Z,EAAMmb,eAC/B,cAAC,GAAD,U,oBC3ECO,GAAkB/U,UAAOI,IAAV,6EAAGJ,CAAH,6B,UC2GbK,wBA/FuC,SAACX,GAAW,IACvDa,EAAKC,eAALD,EADsD,EAGnBmR,mBAMvC,CACC6B,MAAM,EACNnF,UAAW,UACXF,QAAS,GACT8G,mBAAmB,IAbsC,oBAGtDC,EAHsD,KAGvCC,EAHuC,KAgB7D/B,qBAAU,WACN,IAAMnF,EAAWxJ,GAAIoJ,IAAqBtJ,IAI1C,OAHA0J,EAASkG,UAAUnJ,GAAqBoK,GACxCnH,EAASkG,UAAUlJ,GAAwBoK,GAEpC,WACHpH,EAASoG,YAAYrJ,GAAqBoK,GAC1CnH,EAASoG,YAAYpJ,GAAwBoK,MAElD,IAEH,IAAMD,EAAuB,SAACd,GAC1B,IAAMxR,EAAuBwR,EAAO,GAC7BnG,EAAgCrL,EAAhCqL,QAASE,EAAuBvL,EAAvBuL,UAAWiH,EAAYxS,EAAZwS,SAC3BH,EAAiB,2BACVD,GADS,IAEZ1B,MAAM,EACNrF,QAASA,EACTE,UAAWA,EACXiH,SAAUA,MAIZD,EAA6B,SAACf,GAChC,IAAMxR,EAAuBwR,EAAO,GAC7BnG,EAAgCrL,EAAhCqL,QAASE,EAAuBvL,EAAvBuL,UAAWiH,EAAYxS,EAAZwS,SAC3BH,EAAiB,CACb3B,MAAM,EACNrF,QAASA,EACTE,UAAWA,EACXiH,SAAUA,EACVL,mBAAmB,KAapBzB,EAAyD0B,EAAzD1B,KAAMrF,EAAmD+G,EAAnD/G,QAAmBE,GAAgC6G,EAA1CI,SAA0CJ,EAAhC7G,WAAW4G,EAAqBC,EAArBD,kBAMrCM,EACF,cAACC,GAAA,EAAD,CAAQ1U,MAAM,YAAYD,KAAK,QAAQkB,QAL5B,WAEX,OADAxJ,SAASkd,UACF,GAGP,SACKjV,EAAE,YAGX,OACI,eAACwU,GAAD,WACI,cAACU,GAAA,EAAD,CACI3U,MAAO,CAACiG,SAAU,YAClB2O,aAAc,CACVC,SAAU,SACVC,WAAY,SAEhBrC,KAAMA,EACNC,QA7BgB,SAAC3Q,EAAegT,GACzB,YAAXA,GACAX,EAAiB,2BAAID,GAAL,IAAoB1B,MAAM,MA4BtCuC,iBAAkBd,EAAoB,KAAO,IARjD,SASI,cAACe,GAAA,EAAD,CAAOvC,QA1BC,WAChB0B,EAAiB,2BAAID,GAAL,IAAoB1B,MAAM,MA0B3ByC,SAAU5H,EACV6H,UAAW1V,EAAE,SACblG,OAAQib,EAHf,SAIKpH,MAGT,8BACKxO,EAAML,iBC1CRgB,wBAlDyB,SAACC,GACrC,OACI,cAAC,GAAD,UACI,eAAC4V,GAAA,EAAD,CAAMC,WAAS,EACTnD,QAAS,EACToD,WAAW,UACXC,UAAW,SAHjB,UAII,cAAC9E,GAAA,EAAD,CAAQC,QAAM,EAAd,SACI,cAAC0E,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAf,SACI,cAAC,GAAD,QAGR,cAAChF,GAAA,EAAD,CAAQiF,MAAI,EAAZ,SACI,cAACN,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAf,SACI,cAAC,GAAD,QAGR,cAACL,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAf,SACI,cAACpU,GAAD,MAEJ,cAACoP,GAAA,EAAD,CAAQC,QAAM,EAAd,SACI,cAAC0E,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAf,SACI,cAAC,GAAD,QAGR,cAAChF,GAAA,EAAD,CAAQC,QAAM,EAAd,SACI,cAAC0E,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAf,SACI,cAACpU,GAAD,QAGR,cAAC+T,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAf,SACI,cAACxW,GAAD,UACI,cAAC,GAAD,QAGR,cAACwR,GAAA,EAAD,CAAQC,QAAM,EAAd,SACI,cAAC0E,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAf,SACI,cAACpU,GAAD,QAGR,cAACoP,GAAA,EAAD,CAAQC,QAAM,EAAd,SACI,cAAC0E,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAf,SACI,cAAC,GAAD,gB,+BClBxB,SAASE,GAAgBzd,EAAzB,GAA2D,IAAZ0d,EAAW,EAAXA,QACrC1I,EAAWxJ,GAAIoJ,IAAqBtJ,IACpCzB,EAAwB,CAC1BqL,QAAUC,IAAQ5N,EAAE,eACpB6N,UAAY,OACZiH,SAAWqB,GAEf1I,EAASC,KAAK,yBAAyBpL,GAzB3C8T,IAASzP,OACL,cAAC,IAAD,CAAUrL,MAAOA,EAAjB,SACI,cAAC,IAAD,UACI,eAAC,IAAM+a,WAAP,WACI,cAACha,EAAD,IACA,cAACia,GAAA,EAAD,IACA,cAAC,GAAD,UACI,eAAC,WAAD,CAAUC,SAAS,GAAnB,UACI,qBAAKhW,MAAO,CAACiG,SAAU,YAAvB,eACA,cAAC,GAAD,gBAMpBqJ,SAAS2G,eAAe,SAa5B1e,OAAO2e,eAAiB,SAAS5V,GAC7BoP,MAAM,mBAGVnY,OAAO4e,QAAU,SAAwCC,EAAUC,EAAKC,GAEpE,OADA5G,MAAM,kBAAoB0G,IACnB,GpE/BJ,SAAkBve,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAIye,IAAI5a,GAAwBpE,OAAOC,SAASgf,MACpDC,SAAWlf,OAAOC,SAASif,OAIvC,OAGFlf,OAAO8O,iBAAiB,QAAQ,WAC9B,IAAMzO,EAAK,UAAM+D,GAAN,iBACXlD,QAAQC,IAAId,GAERP,IAgEV,SAAiCO,EAAOC,GAEtC6e,MAAM9e,EAAO,CACX+e,QAAS,CAAE,iBAAkB,YAE5B1e,MAAK,SAAA2e,GAEJ,IAAM5F,EAAc4F,EAASD,QAAQ7J,IAAI,gBAEnB,MAApB8J,EAASC,QACO,MAAf7F,IAA8D,IAAvCA,EAAY8F,QAAQ,cAG5Chf,UAAUC,cAAcgf,MAAM9e,MAAK,SAAAC,GACjCA,EAAa8e,aAAa/e,MAAK,WAC7BV,OAAOC,SAASkd,eAKpB/c,EAAgBC,EAAOC,MAG1BgB,OAAM,WACLJ,QAAQC,IACN,oEAvFAue,CAAwBrf,EAAOC,GAI/BC,UAAUC,cAAcgf,MAAM9e,MAAK,WACjCQ,QAAQC,IACN,iHAMJf,EAAgBC,EAAOC,OoEK/BE,CAAuB,CACdY,SAAU,SAAAT,GAEN,OADAO,QAAQC,IAAI,eACLwe,KAAmBhf,EAAc,CAACkO,OAAQuP,U","file":"static/js/main.4c76c3aa.chunk.js","sourcesContent":["import i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport Backend from 'i18next-http-backend';\r\n\r\ni18n\r\n    .use(Backend)\r\n    .use(initReactI18next)\r\n    .init({\r\n        fallbackLng: 'en',\r\n        initImmediate : false,\r\n        lng: \"ru\",\r\n        debug: true,\r\n        interpolation: {\r\n            escapeValue: false,\r\n        }\r\n    });\r\n\r\nexport default i18n;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/custom-sw.js`;\n      console.log(swUrl)\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import {createSlice, PayloadAction, createEntityAdapter, Selector} from \"@reduxjs/toolkit\";\r\nimport {SectionState} from \"../base/SectionState\";\r\nimport update from \"immutability-helper\";\r\nimport {ApplicationState} from \"../../../store\";\r\n\r\nexport interface PointCloudSectionState extends SectionState {\r\n    pointsCloudFile: File | null;\r\n}\r\n\r\nconst defaultState: PointCloudSectionState = {\r\n    isActive: true,\r\n    pointsCloudFile: null,\r\n}\r\n\r\n//Todo: remake using Immer\r\nconst slice = createSlice({\r\n    name: \"pointCloudSection\",\r\n    initialState: defaultState,\r\n    reducers: {\r\n        pointCloudLoadFile(state: PointCloudSectionState, action: PayloadAction<File>) {\r\n            return update(state, {\r\n                pointsCloudFile: {$set: action.payload}\r\n            });\r\n        },\r\n        showPointCloudFiltersPanel(state: PointCloudSectionState) {\r\n            return update(state, {\r\n                isActive: {$set: true}\r\n            });\r\n        },\r\n        closePointCloudFiltersPanel(state: PointCloudSectionState) {\r\n            return update(state, {\r\n                isActive: {$set: false}\r\n            });\r\n        }\r\n    }\r\n});\r\n\r\nexport const pointCloudFiltersPanelActivitySelector: Selector<ApplicationState, boolean> =\r\n    state => state.ui.sections.pointCloudSection.isActive;\r\n\r\nconst {actions, reducer} = slice;\r\nexport const {pointCloudLoadFile, showPointCloudFiltersPanel, closePointCloudFiltersPanel} = actions;\r\nexport default reducer;","import {createSlice, Selector} from \"@reduxjs/toolkit\";\r\nimport {ApplicationState} from \"../../../store\";\r\nimport update from \"immutability-helper\";\r\n\r\nexport interface PointCloudFiltersState {\r\n    filterXFromLimit: number,\r\n    filterXToLimit: number,\r\n    filterYFromLimit: number,\r\n    filterYToLimit: number,\r\n    filterZFromLimit: number,\r\n    filterZToLimit: number,\r\n};\r\n\r\nconst defaultState: PointCloudFiltersState = {\r\n    filterXFromLimit: -100,\r\n    filterXToLimit: 100,\r\n    filterYFromLimit: -100,\r\n    filterYToLimit: 100,\r\n    filterZFromLimit: -100,\r\n    filterZToLimit: 100\r\n};\r\n\r\nconst slice = createSlice({\r\n    name: \"pointCloudFiltersPanel\",\r\n    initialState: defaultState,\r\n    reducers: {\r\n        changeXFromLimit: (state: PointCloudFiltersState, action) =>\r\n            update(state, {\r\n                filterXFromLimit: {$set: action.payload}\r\n            }),\r\n        changeXToLimit: (state: PointCloudFiltersState, action) =>\r\n            update(state, {\r\n                filterXToLimit: {$set: action.payload}\r\n            }),\r\n        changeYFromLimit: (state: PointCloudFiltersState, action) =>\r\n            update(state, {\r\n                filterYFromLimit: {$set: action.payload}\r\n            }),\r\n        changeYToLimit: (state: PointCloudFiltersState, action) =>\r\n            update(state, {\r\n                filterYToLimit: {$set: action.payload}\r\n            }),\r\n        changeZFromLimit: (state: PointCloudFiltersState, action) =>\r\n            update(state, {\r\n                filterZFromLimit: {$set: action.payload}\r\n            }),\r\n        changeZToLimit: (state: PointCloudFiltersState, action) =>\r\n            update(state, {\r\n                filterZToLimit: {$set: action.payload}\r\n            })\r\n    }\r\n});\r\n\r\nexport const getPointCloudFiltersPanelSelector: Selector<ApplicationState, PointCloudFiltersState> =\r\n    state => state.ui.panels.pointCloudFiltersPanel;\r\n\r\nconst {actions, reducer} = slice\r\nexport const {changeXFromLimit, changeXToLimit, changeYFromLimit, changeYToLimit, changeZFromLimit, changeZToLimit} = actions\r\nconst pointCloudFiltersPanel = reducer\r\nexport default pointCloudFiltersPanel","import rootReducer from './rootReducer'\r\nimport {applyMiddleware, compose, createStore} from \"redux\";\r\nimport loadState from \"./loadState\";\r\nimport {configureStore, getDefaultMiddleware} from '@reduxjs/toolkit'\r\nimport thunk from 'redux-thunk';\r\nimport {useDispatch} from \"react-redux\";\r\nimport logger from 'redux-logger';\r\n\r\nexport const composeEnhancers =\r\n    (window && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\r\n\r\nexport const store = configureStore({\r\n    reducer: rootReducer(),\r\n    preloadedState: loadState(),\r\n    middleware: [logger],\r\n    devTools: process.env.NODE_ENV !== 'production'\r\n});\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type ApplicationState = ReturnType<typeof store.getState>;\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();","import {combineReducers} from 'redux'\r\nimport uiReducer from \"./ui/uiReducer\";\r\n\r\nexport default function rootReducer() {\r\n    return combineReducers({\r\n        ui: uiReducer(),\r\n    });\r\n};","import {combineReducers} from \"redux\";\r\nimport uiSectionsReducer from \"./sections/uiSectionsReducer\";\r\nimport uiPanelReducer from \"./panels/uiPanelsReducer\";\r\n\r\nexport default function uiReducer() {\r\n    return combineReducers({\r\n            sections: uiSectionsReducer(),\r\n            panels: uiPanelReducer()\r\n        }\r\n    )\r\n}","import {combineReducers} from \"redux\";\r\nimport {default as pointCloudSectionReducer} from \"./pointCloudSection/pointCloudSection\";\r\n\r\nexport default function uiSectionsReducer() {\r\n    return combineReducers({\r\n        pointCloudSection: pointCloudSectionReducer\r\n    })\r\n}","import {combineReducers} from \"redux\";\r\nimport pointCloudFiltersPanel from \"./pointCloudFiltersPanel/pointCloudFiltersPanel\";\r\n\r\nexport default function uiPanelReducer() {\r\n    return combineReducers({\r\n        pointCloudFiltersPanel: pointCloudFiltersPanel\r\n    })\r\n}","//Todo: load state from database\r\nexport default function loadState() {\r\n    return {};\r\n}","import {createGlobalStyle} from 'styled-components'\r\nimport {normalize} from 'styled-normalize'\r\n\r\n// noinspection Stylelint\r\nexport const GlobalStyle = createGlobalStyle`\r\n  ${normalize};\r\n  \r\n   html, body {\r\n    padding: 0;\r\n    margin: 0;\r\n    height: 100%;\r\n    min-height: 100%;\r\n    min-width: 100%;\r\n    width: 100%;\r\n    font-family: 'Roboto', 'Segoe UI',sans-serif;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    overflow:hidden;\r\n    box-sizing: border-box;\r\n    *, *:before, *:after {\r\n    box-sizing: inherit;\r\n    }\r\n  }\r\n\r\n  code {\r\n    font-family: source-code-pro, monospace;\r\n  }\r\n`","export const defaultAppThemeValues = {\r\n    app: {\r\n        colors: {\r\n            main: {\r\n                white: \"#ffffff\",\r\n                lightGray: \"#f7f7f7\",\r\n                mediumGray: \"#969696\",\r\n                darkGray: \"#363835\",\r\n                lightBlue: \"#bee7f1\",\r\n                mediumBlue: \"#7dd0e4\",\r\n                darkBlue: \"#137cbf\",\r\n            },\r\n            palette: {\r\n                white: \"#ffffff\",\r\n                black: \"\",\r\n                gray: \"\",\r\n                blue1: {\r\n                    dark: \"\",\r\n                    light: \"\",\r\n                    medium: \"\"\r\n                },\r\n                blue2: {\r\n                    dark: \"\",\r\n                    light: \"\",\r\n                    medium: \"\"\r\n                },\r\n                blue3: {\r\n                    dark: \"\",\r\n                    light: \"\",\r\n                    medium: \"\"\r\n                },\r\n                green: {\r\n                    dark: \"\",\r\n                    light: \"\",\r\n                    medium: \"\"\r\n                },\r\n                orange: {\r\n                    dark: \"\",\r\n                    light: \"\",\r\n                    medium: \"\"\r\n                },\r\n                purple1: {\r\n                    dark: \"\",\r\n                    light: \"\",\r\n                    medium: \"\"\r\n                },\r\n                purple2: {\r\n                    dark: \"\",\r\n                    light: \"\",\r\n                    medium: \"\"\r\n                },\r\n                red: {\r\n                    dark: \"\",\r\n                    light: \"\",\r\n                    medium: \"\"\r\n                },\r\n                yellow: {\r\n                    dark: \"\",\r\n                    light: \"\",\r\n                    medium: \"\"\r\n                }\r\n            }\r\n        },\r\n        font: \"Roboto\",\r\n        sizes: {\r\n            header : 48,\r\n            headerMobile: 56,\r\n            instrumentalPanel : 32,\r\n            footer : 30,\r\n        },\r\n        lang : \"ru\"\r\n\r\n    }\r\n};","import {Theme} from \"@material-ui/core/styles/createMuiTheme\";\r\nimport {path} from \"ramda\";\r\nimport {ThemeColors} from \"./ThemeColors\";\r\nimport createAppTheme from \"./createAppTheme\";\r\nimport {defaultAppThemeValues} from \"./defaultAppThemeValues\";\r\n\r\nconst theme: Theme = createAppTheme({\r\n    ...defaultAppThemeValues\r\n})\r\nexport default theme;","import {createMuiTheme, Theme, ThemeOptions} from \"@material-ui/core\";\r\nimport {defaultAppThemeValues} from \"./defaultAppThemeValues\";\r\n\r\ndeclare module '@material-ui/core/styles/createMuiTheme' {\r\n    interface Theme {\r\n        app: {\r\n            colors: {\r\n                main: {\r\n                    white: string,\r\n                    lightGray: string,\r\n                    mediumGray: string,\r\n                    darkGray: string,\r\n                    lightBlue: string,\r\n                    mediumBlue: string,\r\n                    darkBlue: string,\r\n                },\r\n                palette: {\r\n                    black: string,\r\n                    gray: string,\r\n                    white: string,\r\n                    red: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    orange: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    yellow: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    green: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    blue1: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    blue2: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    blue3: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    purple1: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    purple2: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    }\r\n                }\r\n            },\r\n            font: string,\r\n            sizes: {\r\n                header : number,\r\n                headerMobile:number,\r\n                instrumentalPanel : number,\r\n                footer : number\r\n            },\r\n            lang : string\r\n        }\r\n    }\r\n\r\n    interface ThemeOptions {\r\n        app: {\r\n            colors: {\r\n                main: {\r\n                    white: string,\r\n                    lightGray: string,\r\n                    mediumGray: string,\r\n                    darkGray: string,\r\n                    lightBlue: string,\r\n                    mediumBlue: string,\r\n                    darkBlue: string,\r\n                },\r\n                palette: {\r\n                    black: string,\r\n                    gray: string,\r\n                    white: string,\r\n                    red: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    orange: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    yellow: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    green: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    blue1: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    blue2: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    blue3: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    purple1: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    },\r\n                    purple2: {\r\n                        light: string,\r\n                        medium: string,\r\n                        dark: string,\r\n                    }\r\n                }\r\n            },\r\n            font: string,\r\n            sizes: {\r\n                header : number,\r\n                headerMobile: number,\r\n                instrumentalPanel : number,\r\n                footer : number\r\n            },\r\n            lang : string\r\n        }\r\n    }\r\n}\r\n\r\nexport default function createAppTheme(options: ThemeOptions) : Theme {\r\n    return createMuiTheme({\r\n        ...options,\r\n        ...defaultAppThemeValues\r\n    })\r\n}\r\n","export enum ThemeColors {\r\n    white,\r\n    lightGray,\r\n    mediumGray,\r\n    darkGray,\r\n    lightBlue,\r\n    mediumBlue,\r\n    darkBlue,\r\n}","import {MuiThemeProvider, StylesProvider} from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport {ThemeProvider} from \"styled-components\";\r\nimport theme from \"./theme\";\r\n\r\n// @ts-ignore\r\nconst Theme = ({children}) => (\r\n    <StylesProvider injectFirst>\r\n        <MuiThemeProvider theme={theme}>\r\n            <ThemeProvider theme={theme}>\r\n                {children}\r\n            </ThemeProvider>\r\n        </MuiThemeProvider>\r\n    </StylesProvider>\r\n);\r\n\r\nexport default Theme","import {path} from \"ramda\";\r\nimport {ThemeColors} from \"./ThemeColors\";\r\n\r\n// @ts-ignore\r\nexport const getTheme: string = (keys: any[] = []) =>\r\n// @ts-ignore\r\n    props => path(['theme', 'app', ...keys], props);\r\n// @ts-ignore\r\nexport const themeColor = (key: ThemeColors) => getTheme(['colors', \"main\", ThemeColors[key]]);\r\n// @ts-ignore\r\nexport const paletteColor = (key: string) => getTheme(['colors', \"palette\", key]);\r\n// @ts-ignore\r\nexport const appSizes = (key: string) => getTheme(['sizes', key]);","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {ThemeColors} from \"../theme/ThemeColors\";\r\nimport {appSizes, themeColor} from \"../theme/themeAccessors\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nexport const Area = styled.main<Theme>`\r\n  //noinspection ALL${props => props.theme.breakpoints.up(\"sm\")} {\r\n    height: calc(100vh - ${props => appSizes('header')(props) + appSizes('footer')(props) + appSizes('instrumentalPanel')(props)}px);\r\n  }\r\n   ${props => props.theme.breakpoints.down(\"sm\")} {\r\n   height: calc(100vh - ${props => appSizes('headerMobile')(props)}px);\r\n  }\r\n  background: ${themeColor(ThemeColors.lightBlue)};\r\n`\r\n","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {ThemeColors} from \"../../theme/ThemeColors\";\r\nimport {appSizes, themeColor} from \"../../theme/themeAccessors\";\r\n\r\nexport const HeaderPanelContainer = styled.div<Theme>`\r\nbackground: ${themeColor(ThemeColors.mediumGray)};\r\nheight: ${appSizes(\"header\")}px;\r\ndisplay: flex;\r\nalign-items: center;\r\nflex-direction: row-reverse;\r\npadding-left: 16px;\r\npadding-right: 16px;\r\n`\r\n","import React from \"react\";\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {withTheme} from \"styled-components\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {HeaderPanelContainer} from \"./style\";\r\n\r\nconst HeaderPanel: React.FC<{ theme: Theme }> = (_) => {\r\n    const {t} = useTranslation();\r\n    return (\r\n        <HeaderPanelContainer>\r\n            <Tooltip title={t('user_account')}>\r\n                <IconButton size={\"small\"}\r\n                            color={\"primary\"}\r\n                            style={{marginLeft: 10}}>\r\n                    <AccountCircleIcon style={{color: \"white\", fontSize: 35}}/>\r\n                </IconButton>\r\n            </Tooltip>\r\n        </HeaderPanelContainer>\r\n    );\r\n}\r\n\r\nexport default withTheme(HeaderPanel);","import React, {Fragment} from \"react\";\r\nimport {useAppDispatch} from \"../../../../../store/store\";\r\nimport {\r\n    pointCloudLoadFile,\r\n    showPointCloudFiltersPanel\r\n} from \"../../../../../store/ui/sections/pointCloudSection/pointCloudSection\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\r\nimport {withTheme} from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport DialpadIcon from \"@material-ui/icons/Dialpad\";\r\nimport ClearAllIcon from '@material-ui/icons/ClearAll';\r\n\r\nconst PointCloudSection: React.FC<{ theme: Theme }> = (props) => {\r\n    const {t} = useTranslation()\r\n    const dispatch = useAppDispatch();\r\n    return (\r\n        <div>\r\n            <Fragment>\r\n                <input\r\n                    color=\"primary\"\r\n                    type=\"file\"\r\n                    onChange={(e) => {\r\n                        e.preventDefault();\r\n                        const file: File = e.target.files?.[0] as File;\r\n                        if (file && file !== undefined) {\r\n                            dispatch(pointCloudLoadFile(file));\r\n                        }\r\n                    }}\r\n                    id=\"icon-button-file\"\r\n                    style={{display: 'none',}}/>\r\n                <Tooltip title={t('load_file_with_point_cloud')}>\r\n                    <label htmlFor=\"icon-button-file\">\r\n                        <IconButton\r\n                            component=\"span\"\r\n                            size=\"small\"\r\n                            color=\"primary\">\r\n                            <CloudUploadIcon style={{color: \"white\"}}/>\r\n                        </IconButton>\r\n                    </label>\r\n                </Tooltip>\r\n            </Fragment>\r\n            <Tooltip title={t('open_panel_point_cloud_filters')}>\r\n                <IconButton size={\"small\"}\r\n                            color={\"primary\"}\r\n                            onClick={() =>\r\n                                dispatch(showPointCloudFiltersPanel())}\r\n                            style={{verticalAlign: \"bottom\", marginLeft: 8}}>\r\n                    <DialpadIcon style={{color: \"white\"}}/>\r\n                </IconButton>\r\n            </Tooltip>\r\n            <Tooltip title={t('point_cloud_clear')}>\r\n                <IconButton size={\"small\"}\r\n                            color={\"primary\"}\r\n                            onClick={() => null}\r\n                            style={{verticalAlign: \"bottom\", marginLeft: 8}}>\r\n                    <ClearAllIcon style={{color: \"white\"}}/>\r\n                </IconButton>\r\n            </Tooltip>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default withTheme(PointCloudSection);","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {ThemeColors} from \"../../theme/ThemeColors\";\r\nimport {appSizes, themeColor} from \"../../theme/themeAccessors\";\r\n\r\nexport const Panel = styled.div<Theme>`\r\nbackground: ${themeColor(ThemeColors.mediumGray)};\r\nheight: ${appSizes(\"instrumentalPanel\")}px;\r\ndisplay: flex;\r\nflex-direction: row;\r\nalign-items: center;\r\npadding-left: 16px;\r\npadding-right: 16px;\r\n`","import styled from \"styled-components\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport {themeColor} from \"../theme/themeAccessors\";\r\nimport {ThemeColors} from \"../theme/ThemeColors\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nexport const AppDivider = styled(Divider)`\r\nbackground-color: ${themeColor(ThemeColors.mediumGray)};\r\n`\r\n\r\nexport const AppDividerLight = styled(Divider)`\r\nbackground-color: ${themeColor(ThemeColors.lightGray)};\r\n`\r\n\r\nexport const AppDividerBold = styled(Divider)`\r\nbackground-color: ${themeColor(ThemeColors.lightGray)};\r\nwidth: 1.15px;\r\nheight: 24px;\r\nmargin-left: 8px;\r\nmargin-right: 8px;\r\n`\r\n\r\nexport const AppCloseIcon = styled(CloseIcon)`\r\ncolor: ${themeColor(ThemeColors.white)};\r\n`\r\n","import React from \"react\";\r\nimport {withTheme} from \"styled-components\";\r\nimport PointCloudSection from \"../sections/pointCloudSection\";\r\nimport {Panel} from \"./style\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {AppDividerBold} from \"../../shared/style\";\r\n\r\nconst InstrumentalPanel: React.FC<{ theme: Theme }> = (props) => {\r\n    return (\r\n        <Panel>\r\n            <PointCloudSection/>\r\n            <AppDividerBold orientation=\"vertical\"/>\r\n        </Panel>\r\n    );\r\n};\r\n\r\nexport default withTheme(InstrumentalPanel);","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {ThemeColors} from \"../../theme/ThemeColors\";\r\nimport {appSizes, themeColor} from \"../../theme/themeAccessors\";\r\n\r\nexport const FooterContainer = styled.div<Theme>`\r\nbackground: ${themeColor(ThemeColors.mediumGray)};\r\nheight: ${appSizes(\"footer\")}px;\r\n`","import React, {Component, useState} from 'react';\r\nimport {withTheme} from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {FooterContainer} from \"./style\";\r\n\r\nconst StatePanel: React.FC<{ theme: Theme }> = (props) => {\r\n    return (\r\n        <FooterContainer>\r\n        </FooterContainer>\r\n    );\r\n}\r\n\r\nexport default withTheme(StatePanel);","import {injectable} from \"inversify\";\r\nimport {EventBusService} from \"./EventBusService\";\r\nimport {EventListenerFn} from \"./EventListenerFn\";\r\nimport EventEmitter from \"events\";\r\n\r\n@injectable()\r\nclass EventBus implements EventBusService {\r\n    protected eventEmitter: EventEmitter.EventEmitter = new EventEmitter.EventEmitter();\r\n\r\n    constructor() {\r\n\r\n    }\r\n\r\n    subscribe(event: string, action: EventListenerFn): void {\r\n        const functions: Function[] = this.eventEmitter.listeners(event);\r\n        const alreadySubscribed = functions.map(f => f.name).includes(action.name)\r\n\r\n        if(!alreadySubscribed)\r\n            this.eventEmitter.addListener(event, action);\r\n    }\r\n\r\n    unsubscribe(event: string, action: EventListenerFn): void {\r\n        this.eventEmitter.removeListener(event, action);\r\n    }\r\n\r\n    send(event: string, value: any): void {\r\n        this.eventEmitter.emit(event, [value]);\r\n    }\r\n}\r\n\r\nexport default EventBus","import {Engine} from \"babylonjs/Engines/engine\";\r\nimport {ArcRotateCamera} from \"babylonjs/Cameras/arcRotateCamera\";\r\nimport {Light} from \"babylonjs/Lights/light\";\r\nimport {Scene} from \"babylonjs/scene\";\r\nimport {PointsCloudSystem} from \"babylonjs/Particles/pointsCloudSystem\";\r\n\r\nexport default class SceneAspects {\r\n    private _engine: Engine | null = null;\r\n    private _scene: Scene | null = null;\r\n    private _camera: ArcRotateCamera | null = null;\r\n    private _light: Light | null = null\r\n    private _pointsCloudSystem: PointsCloudSystem | null = null\r\n\r\n    get pointsCloudSystem(): PointsCloudSystem | null {\r\n        return this._pointsCloudSystem;\r\n    }\r\n    set pointsCloudSystem(value: PointsCloudSystem | null) {\r\n        this._pointsCloudSystem = value;\r\n    }\r\n    get light(): Light | null {\r\n        return this._light;\r\n    }\r\n\r\n    set light(value: Light | null) {\r\n        this._light = value;\r\n    }\r\n\r\n    get camera(): ArcRotateCamera | null {\r\n        return this._camera;\r\n    }\r\n\r\n    set camera(value: ArcRotateCamera | null) {\r\n        this._camera = value;\r\n    }\r\n\r\n    get scene(): Scene | null {\r\n        return this._scene;\r\n    }\r\n\r\n    set scene(value: Scene | null) {\r\n        this._scene = value;\r\n    }\r\n\r\n    set engine(value: Engine | null) {\r\n        this._engine = value;\r\n    }\r\n\r\n    get engine(): Engine | null {\r\n        return this._engine;\r\n    }\r\n}","import {injectable} from \"inversify\";\r\nimport SceneAspects from \"../../views/components/layout/scene/code/SceneAspects\";\r\n\r\n@injectable()\r\nclass ApiProvider {\r\n    private _scene: SceneAspects = new SceneAspects();\r\n\r\n    get scene(): SceneAspects {\r\n        return this._scene;\r\n    }\r\n}\r\n\r\nexport default ApiProvider;\r\n","import WindowPanel from \"./base/WindowPanel\";\r\n\r\nexport default class PointCloudFiltersWindow extends WindowPanel{\r\n\r\n\r\n    public close(){\r\n\r\n    }\r\n}","import {IWindowPanel} from \"./IWindowPanel\";\r\n\r\nexport default class WindowPanel implements IWindowPanel {\r\n    close(): void {\r\n    }\r\n\r\n    getType(): Symbol {\r\n        return Symbol.for(\"dfs\");\r\n    }\r\n\r\n}","let WindowPanelTypes = {\r\n    PointCloudFiltersWindow: Symbol.for(\"PointCloudFiltersWindow\")\r\n};\r\n\r\nexport default WindowPanelTypes;","import {WindowPanelsService} from \"../WindowPanelsService\";\r\nimport WindowPanel from \"./base/WindowPanel\";\r\nimport PointCloudFiltersWindow from \"./PointCloudFiltersWindow\";\r\nimport WindowPanelTypes from \"../WindowPanelTypes\";\r\nimport { injectable } from \"inversify\";\r\n\r\n@injectable()\r\nexport default class WindowPanelsProvider implements WindowPanelsService{\r\n    showWindowPanel(windowPanelType: Symbol): WindowPanel {\r\n        switch (windowPanelType){\r\n            case WindowPanelTypes.PointCloudFiltersWindow :\r\n                return new PointCloudFiltersWindow();\r\n                break;\r\n            default:\r\n                throw new Error(\"Unknown panelWindow type\")\r\n        }\r\n    }\r\n\r\n    closeWindowPanel(windowPanelType: Symbol): void {\r\n    }\r\n\r\n    windowIsOpened(windowPanelType: Symbol): boolean {\r\n        return false;\r\n    }\r\n\r\n}","export const API_PROVIDER_SERVICE: symbol = Symbol.for(\"API_PROVIDER_SERVICE\");\r\nexport const EVENT_BUS_SERVICE: symbol = Symbol.for(\"EventBusService\");\r\nexport const WINDOW_PANELS_SERVICE: symbol = Symbol.for(\"WINDOW_PANELS_SERVICE\");","import \"reflect-metadata\";\r\nimport EventBus from '../../services/eventBus/EventBus';\r\nimport ApiProvider from \"../../services/apiProvider/ApiProvider\";\r\nimport {EventBusService} from \"../../services/eventBus/EventBusService\";\r\nimport {Container} from \"inversify\";\r\nimport {WindowPanelsService} from \"../../services/windowPanelsService/WindowPanelsService\";\r\nimport WindowPanelsProvider from \"../../services/windowPanelsService/windowPanels/WindowPanelProvider\";\r\nimport {API_PROVIDER_SERVICE, EVENT_BUS_SERVICE, WINDOW_PANELS_SERVICE} from \"./ServiceTypes\";\r\n\r\nconst IoC = new Container({\r\n    autoBindInjectable: true,\r\n    defaultScope: \"Singleton\",\r\n    skipBaseClassChecks: true\r\n});\r\n\r\nIoC.bind<EventBusService>(EVENT_BUS_SERVICE).to(EventBus).inSingletonScope();\r\nIoC.bind<WindowPanelsService>(WINDOW_PANELS_SERVICE).to(WindowPanelsProvider).inSingletonScope();\r\nIoC.bind<ApiProvider>(API_PROVIDER_SERVICE).to(ApiProvider).inSingletonScope();\r\n\r\nexport default IoC;\r\n","import * as BABYLON from \"babylonjs\";\r\nimport setupAxis from \"./setupAxis\";\r\nimport {hexToRgb} from \"../../../../../utilities/color/hexToRgb\";\r\nimport {ThemeColors} from \"../../../theme/ThemeColors\";\r\nimport { Theme } from \"@material-ui/core\";\r\nimport {themeColor} from \"../../../theme/themeAccessors\";\r\n\r\nexport default function setupScene(engine: BABYLON.Engine, theme: Theme): BABYLON.Scene {\r\n    const scene: BABYLON.Scene = new BABYLON.Scene(engine);\r\n\r\n    const colorHex = themeColor(ThemeColors.mediumBlue)({theme});\r\n    const color = hexToRgb(colorHex);\r\n    if(color && color !== null)\r\n        scene.clearColor = new BABYLON.Color4(color.r / 255, color.g / 255, color.b / 255, 1);\r\n\r\n    setupAxis(scene, 2);\r\n\r\n    engine.runRenderLoop(() => {\r\n        scene.render();\r\n    });\r\n    window.addEventListener(\"resize\", () => {\r\n        engine.resize();\r\n    });\r\n\r\n    return scene;\r\n}\r\n\r\n\r\n// /** Add map-like controls to an ArcRotate camera.\r\n//  * @param {BABYLON.Scene} scene\r\n//  * @param {module:babylonjs/Cameras/arcRotateCamera.ArcRotateCamera} camera\r\n//  */\r\n// function AddControls(scene, camera) {\r\n//\r\n//     camera.inertia = 0.2;\r\n//     camera.lowerRadiusLimit = 1;\r\n//     camera.upperRadiusLimit = 350;\r\n//     // camera.upperBetaLimit = Math.PI / 2 - 0.1;\r\n//     camera.angularSensibilityX = camera.angularSensibilityY = 500;\r\n//\r\n//     const plane =\r\n//         BABYLON.Plane.FromPositionAndNormal(BABYLON.Vector3.Zero(), BABYLON.Axis.Y);\r\n//\r\n//     const inertialPanning = BABYLON.Vector3.Zero();\r\n//\r\n//     /** @type {BABYLON.Vector3} */\r\n//     let initialPos;\r\n//     const panningFn = () => {\r\n//         return;\r\n//         const pos = getPosition(scene, camera, plane);\r\n//         panning(pos, initialPos, camera.inertia, inertialPanning);\r\n//     };\r\n//\r\n//     const inertialPanningFn = () => {\r\n//         if (inertialPanning.x !== 0 || inertialPanning.y !== 0 || inertialPanning.z !== 0) {\r\n//             camera.target.addInPlace(inertialPanning);\r\n//             inertialPanning.scaleInPlace(camera.inertia);\r\n//             zeroIfClose(inertialPanning);\r\n//         }\r\n//     };\r\n//\r\n//     const wheelPrecisionFn = () => {\r\n//         camera.wheelPrecision = 1 / camera.radius * 1000;\r\n//     };\r\n//\r\n//     const zoomFn = (p, e) => {\r\n//         const delta = zoomWheel(p, e, camera);\r\n//         zooming(delta, scene, camera, plane, inertialPanning);\r\n//     }\r\n//\r\n//     const prvScreenPos = BABYLON.Vector2.Zero();\r\n//     const rotateFn = () => {\r\n//         return;\r\n//         rotating(scene, camera, prvScreenPos);\r\n//     };\r\n//\r\n//     const removeObservers = () => {\r\n//         scene.onPointerObservable.removeCallback(panningFn);\r\n//         scene.onPointerObservable.removeCallback(rotateFn);\r\n//     }\r\n//\r\n//     scene.onPointerObservable.add((p, e) => {\r\n//         removeObservers();\r\n//         if (p.event.button === 0) {\r\n//             initialPos = getPosition(scene, camera, plane);\r\n//             scene.onPointerObservable.add(panningFn, BABYLON.PointerEventTypes.POINTERMOVE);\r\n//         } else {\r\n//             prvScreenPos.copyFromFloats(scene.pointerX, scene.pointerY);\r\n//             scene.onPointerObservable.add(rotateFn, BABYLON.PointerEventTypes.POINTERMOVE);\r\n//         }\r\n//     }, BABYLON.PointerEventTypes.POINTERDOWN);\r\n//\r\n//     scene.onPointerObservable.add((p, e) => {\r\n//         removeObservers();\r\n//     }, BABYLON.PointerEventTypes.POINTERUP);\r\n//\r\n//     scene.onPointerObservable.add(zoomFn, BABYLON.PointerEventTypes.POINTERWHEEL);\r\n//\r\n//     scene.onBeforeRenderObservable.add(inertialPanningFn);\r\n//     scene.onBeforeRenderObservable.add(wheelPrecisionFn);\r\n//\r\n//     // stop context menu showing on canvas right click\r\n//     scene.getEngine().getRenderingCanvas().addEventListener(\"contextmenu\", (e) => {\r\n//         e.preventDefault();\r\n//     });\r\n// }\r\n//\r\n// /** Get pos on plane.\r\n//  * @param {BABYLON.Scene} scene\r\n//  * @param {BABYLON.ArcRotateCamera} camera\r\n//  * @param {BABYLON.Plane} plane\r\n//  */\r\n// function getPosition(scene, camera, plane) {\r\n//     return null;\r\n//     const ray = scene.createPickingRay(\r\n//         scene.pointerX, scene.pointerY, BABYLON.Matrix.Identity(), camera, false);\r\n//     const distance = ray.intersectsPlane(plane);\r\n//\r\n//     // not using this ray again, so modifying its vectors here is fine\r\n//     return distance !== null ?\r\n//         ray.origin.addInPlace(ray.direction.scaleInPlace(distance)) : null;\r\n// }\r\n//\r\n// /** Return offsets for inertial panning given initialize and current\r\n//  * pointer positions.\r\n//  * @param {BABYLON.Vector3} newPos\r\n//  * @param {BABYLON.Vector3} initialPos\r\n//  * @param {number} inertia\r\n//  * @param {BABYLON.Vector3} ref\r\n//  */\r\n// function panning(newPos, initialPos, inertia, ref) {\r\n//     const directionToZoomLocation = initialPos.subtract(newPos);\r\n//     const panningX = directionToZoomLocation.x * (1 - inertia);\r\n//     const panningZ = directionToZoomLocation.z * (1 - inertia);\r\n//     ref.copyFromFloats(panningX, 0, panningZ);\r\n//     return ref;\r\n// };\r\n//\r\n// /** Get the wheel delta divided by the camera wheel precision.\r\n//  * @param {BABYLON.PointerInfoPre} p\r\n//  * @param {BABYLON.EventState} e\r\n//  * @param {BABYLON.ArcRotateCamera} camera\r\n//  */\r\n// function zoomWheel(p, e, camera) {\r\n//     const event = p.event;\r\n//     event.preventDefault();\r\n//     let delta = event.wheelDelta;\r\n//     //if (event.deltaY) {\r\n//     //    delta = -event.deltaY;\r\n//     //} else if (event.wheelDelta) {\r\n//     //    delta = event.wheelDelta;\r\n//     //} else if (event.detail) {\r\n//     //    delta = -event.detail;\r\n//     //}\r\n//     delta /= camera.wheelPrecision;\r\n//     return delta;\r\n// }\r\n//\r\n// /** Zoom to pointer position. Zoom amount determined by delta.\r\n//  * @param {number} delta\r\n//  * @param {BABYLON.Scene} scene\r\n//  * @param {BABYLON.ArcRotateCamera} camera\r\n//  * @param {BABYLON.Plane} plane\r\n//  * @param {BABYLON.Vector3} ref\r\n//  */\r\n// function zooming(delta, scene, camera, plane, ref) {\r\n//     // if (camera.radius - camera.lowerRadiusLimit < 1 && delta > 0) {\r\n//     //     return;\r\n//     // } else if (camera.upperRadiusLimit - camera.radius < 1 && delta < 0) {\r\n//     //     return;\r\n//     // }\r\n//     const inertiaComp = 1 - camera.inertia;\r\n//     if (camera.radius - (camera.inertialRadiusOffset + delta) / inertiaComp < camera.lowerRadiusLimit) {\r\n//         delta = (camera.radius - camera.lowerRadiusLimit) * inertiaComp - camera.inertialRadiusOffset;\r\n//     } else if (camera.radius - (camera.inertialRadiusOffset + delta) / inertiaComp >\r\n//         camera.upperRadiusLimit) {\r\n//         delta = (camera.radius - camera.upperRadiusLimit) * inertiaComp - camera.inertialRadiusOffset;\r\n//     }\r\n//\r\n//     const zoomDistance = delta / inertiaComp;\r\n//     const ratio = zoomDistance / camera.radius;\r\n//     const vec = getPosition(scene, camera, plane);\r\n//\r\n//     if (vec !== undefined && vec) {\r\n//         const directionToZoomLocation = vec.subtract(camera.target);\r\n//         const offset = directionToZoomLocation.scale(ratio);\r\n//         offset.scaleInPlace(inertiaComp);\r\n//         ref.addInPlace(offset);\r\n//     }\r\n//     camera.inertialRadiusOffset += delta;\r\n// }\r\n//\r\n// /** Rotate the camera\r\n//  * @param {BABYLON.Scene} scene\r\n//  * @param {BABYLON.Vector2} prvScreenPos\r\n//  * @param {BABYLON.ArcRotateCamera} camera\r\n//  */\r\n// function rotating(scene, camera, prvScreenPos) {\r\n//     const offsetX = scene.pointerX - prvScreenPos.x;\r\n//     const offsetY = scene.pointerY - prvScreenPos.y;\r\n//     prvScreenPos.copyFromFloats(scene.pointerX, scene.pointerY);\r\n//     changeInertialAlphaBetaFromOffsets(offsetX, offsetY, camera);\r\n// }\r\n//\r\n// /** Modifies the camera's inertial alpha and beta offsets.\r\n//  * @param {number} offsetX\r\n//  * @param {number} offsetY\r\n//  * @param {BABYLON.ArcRotateCamera} camera\r\n//  */\r\n// function changeInertialAlphaBetaFromOffsets(offsetX, offsetY, camera) {\r\n//     const alphaOffsetDelta = offsetX / camera.angularSensibilityX;\r\n//     const betaOffsetDelta = offsetY / camera.angularSensibilityY;\r\n//     camera.inertialAlphaOffset -= alphaOffsetDelta;\r\n//     camera.inertialBetaOffset -= betaOffsetDelta;\r\n// }\r\n//\r\n// /** Sets x y or z of passed in vector to zero if less than Epsilon.\r\n//  * @param {BABYLON.Vector3} vec\r\n//  */\r\n// function zeroIfClose(vec) {\r\n//     if (Math.abs(vec.x) < BABYLON.Epsilon) {\r\n//         vec.x = 0;\r\n//     }\r\n//     if (Math.abs(vec.y) < BABYLON.Epsilon) {\r\n//         vec.y = 0;\r\n//     }\r\n//     if (Math.abs(vec.z) < BABYLON.Epsilon) {\r\n//         vec.z = 0;\r\n//     }\r\n// }\r\n\r\n\r\n\r\n\r\n","export const hexToRgb = (hex : string) => {\r\n    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n    hex = hex.replace(shorthandRegex, function(m, r, g, b) {\r\n        return r + r + g + g + b + b;\r\n    });\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16)\r\n    } : null;\r\n}","import * as BABYLON from \"babylonjs\";\r\nimport {StandardMaterial} from \"babylonjs/Materials/standardMaterial\";\r\n\r\nexport default function setupAxis(sceneBase : BABYLON.Scene,  size:number){\r\n\r\n    const makeTextPlane = function (text: string, color: string, size: number, scene: BABYLON.Scene) {\r\n        const dynamicTexture = new BABYLON.DynamicTexture(\"DynamicTexture\", 50, scene, true);\r\n        dynamicTexture.hasAlpha = true;\r\n        dynamicTexture.drawText(text, 5, 40, \"bold 36px Arial\", color, \"transparent\", true);\r\n        const plane = mesh.CreatePlane(\"TextPlane\", size, scene, true);\r\n        let standardMaterial : StandardMaterial = new BABYLON.StandardMaterial(\"TextPlaneMaterial\", scene);\r\n        standardMaterial.specularColor = new BABYLON.Color3(0, 0, 0);\r\n        standardMaterial.diffuseTexture = dynamicTexture;\r\n        plane.material = standardMaterial;\r\n        plane.material.backFaceCulling = false;\r\n        return plane;\r\n    };\r\n\r\n    const mesh = BABYLON.Mesh;\r\n\r\n    const axisX = mesh.CreateLines(\"axisX\", [\r\n        BABYLON.Vector3.Zero(), new BABYLON.Vector3(size, 0, 0), new BABYLON.Vector3(size * 0.95, 0.05 * size, 0),\r\n        new BABYLON.Vector3(size, 0, 0), new BABYLON.Vector3(size * 0.95, -0.05 * size, 0)\r\n    ], sceneBase);\r\n    axisX.color = new BABYLON.Color3(1, 0, 0);\r\n    const xChar = makeTextPlane(\"X\", \"red\", size / 10, sceneBase);\r\n    xChar.position = new BABYLON.Vector3(0.9 * size, -0.05 * size, 0);\r\n    const axisY = mesh.CreateLines(\"axisY\", [\r\n        BABYLON.Vector3.Zero(), new BABYLON.Vector3(0, size, 0), new BABYLON.Vector3(-0.05 * size, size * 0.95, 0),\r\n        new BABYLON.Vector3(0, size, 0), new BABYLON.Vector3(0.05 * size, size * 0.95, 0)\r\n    ], sceneBase);\r\n    axisY.color = new BABYLON.Color3(0, 1, 0);\r\n    const yChar = makeTextPlane(\"Y\", \"green\", size / 10, sceneBase);\r\n    yChar.position = new BABYLON.Vector3(0, 0.9 * size, -0.05 * size);\r\n    const axisZ = mesh.CreateLines(\"axisZ\", [\r\n        BABYLON.Vector3.Zero(), new BABYLON.Vector3(0, 0, size), new BABYLON.Vector3(0, -0.05 * size, size * 0.95),\r\n        new BABYLON.Vector3(0, 0, size), new BABYLON.Vector3(0, 0.05 * size, size * 0.95)\r\n    ], sceneBase);\r\n    axisZ.color = new BABYLON.Color3(0, 0, 1);\r\n    const zChar = makeTextPlane(\"Z\", \"blue\", size / 10, sceneBase);\r\n    zChar.position = new BABYLON.Vector3(0, 0.05 * size, 0.9 * size);\r\n}","import {Scene} from \"babylonjs/scene\";\r\nimport * as BABYLON from \"babylonjs\";\r\nimport {Camera} from \"babylonjs/Cameras/camera\";\r\nimport {Vector3} from \"babylonjs/Maths/math.vector\";\r\nimport {Engine} from \"babylonjs/Engines/engine\";\r\nimport {ArcRotateCamera} from \"babylonjs/Cameras/arcRotateCamera\";\r\n\r\nexport default function setupZoom(scene: Scene, engine: Engine, camera: Camera){\r\n    let totalZoom = 0;\r\n    let zoomTarget : Vector3|null = null;\r\n\r\n    scene.onPointerObservable.add((eventData,_) => {\r\n        const event = eventData.event as any;\r\n        const delta = (Math.max(-1, Math.min(1, (event.wheelDelta || -event.detail || event.deltaY)))) * 0.9;\r\n        if (delta > 0 && totalZoom < 14 || delta < 0) {\r\n            totalZoom += delta;\r\n            zoom2DView(camera, delta, zoomTarget);\r\n        }\r\n    }, BABYLON.PointerEventTypes.POINTERWHEEL);\r\n    scene.onPointerObservable.add(() => {\r\n        zoomTarget = BABYLON.Vector3.Unproject(\r\n            new BABYLON.Vector3(scene.pointerX, scene.pointerY, 0),\r\n            engine.getRenderWidth(),\r\n            engine.getRenderHeight(),\r\n            camera.getWorldMatrix(),\r\n            camera.getViewMatrix(),\r\n            camera.getProjectionMatrix()\r\n        );\r\n    }, BABYLON.PointerEventTypes.POINTERMOVE);\r\n}\r\n\r\nfunction zoom2DView(camera : Camera, delta : number, zoomTarget : Vector3|null){\r\n    const zoomingOut = delta < 0;\r\n\r\n    if (zoomTarget) {\r\n        const totalX = Math.abs(camera.orthoLeft! - camera.orthoRight!);\r\n        const totalY = Math.abs(camera.orthoTop! - camera.orthoBottom!);\r\n\r\n        const aspectRatio = totalY / totalX;\r\n\r\n        {\r\n            const fromCoord = camera.orthoLeft! - zoomTarget.x;\r\n            const ratio = fromCoord / totalX;\r\n            camera.orthoLeft! -= ratio * delta;\r\n        }\r\n\r\n        {\r\n            const fromCoord = camera.orthoRight! - zoomTarget.x;\r\n            const ratio = fromCoord / totalX;\r\n            camera.orthoRight! -= ratio * delta;\r\n        }\r\n\r\n        {\r\n            const fromCoord = camera.orthoTop! - zoomTarget.y;\r\n            const ratio = fromCoord / totalY;\r\n            camera.orthoTop! -= ratio * delta * aspectRatio;\r\n        }\r\n\r\n        {\r\n            const fromCoord = camera.orthoBottom! - zoomTarget.y;\r\n            const ratio = fromCoord / totalY;\r\n            camera.orthoBottom! -= ratio * delta * aspectRatio;\r\n        }\r\n\r\n        // decrease pan sensitivity the closer the zoom level.\r\n        (camera as ArcRotateCamera).panningSensibility = 6250 / Math.abs(totalX / 2);\r\n    }\r\n};","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {appSizes} from \"../../theme/themeAccessors\";\r\n\r\nexport const Canvas = styled.canvas<Theme>`\r\n   outline: none;\r\n   display: block;\r\n   margin: 0;\r\n   padding: 0;\r\n   width: 100%;\r\n   ${props => props.theme.breakpoints.up(\"sm\")} {\r\n      height: calc(100vh - ${props => appSizes('header')(props) + appSizes('footer')(props) + appSizes('instrumentalPanel')(props) }px);\r\n   }\r\n   ${props => props.theme.breakpoints.down(\"sm\")} {\r\n      height: calc(100vh - ${props => appSizes('headerMobile')(props)}px);\r\n   }\r\n   touch-action: auto;\r\n`","export default class SolidPoint {\r\n\r\n    private _x: number = 0;\r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    set x(value: number) {\r\n        this._x = value;\r\n    }\r\n\r\n    private _y: number = 0;\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    set y(value: number) {\r\n        this._y = value;\r\n    }\r\n\r\n    private _z: number = 0;\r\n    get z() {\r\n        return this._z;\r\n    }\r\n\r\n    set z(value: number) {\r\n        this._z = value;\r\n    }\r\n\r\n    private _parameter: number = 0;\r\n    get parameter() {\r\n        return this._parameter;\r\n    }\r\n\r\n    set parameter(value: number) {\r\n        this._parameter = value;\r\n    }\r\n\r\n    constructor(x: number, y: number, z: number, parameter: number) {\r\n        this._x = x;\r\n        this._y = y;\r\n        this._z = z;\r\n        this._parameter = parameter;\r\n    }\r\n}","export default function calculateMinMaxOfArray(array : Array<number>) {\r\n    const arrayLength = array.length;\r\n    const borderIncrement = 125000;\r\n    let arrayCounter = 0;\r\n    let lastBottomBorder = 0;\r\n    let lastTopBorder = borderIncrement;\r\n    let minValue = 0;\r\n    let maxValue = 0;\r\n\r\n    while (true) {\r\n        const arrayPart = array.slice(lastBottomBorder, lastTopBorder)\r\n\r\n        let min = Math.min(...arrayPart);\r\n        let max = Math.max(...arrayPart);\r\n\r\n        minValue = min < minValue ? min : minValue;\r\n        maxValue = max > maxValue ? max : maxValue;\r\n\r\n        lastBottomBorder += borderIncrement;\r\n        lastTopBorder += borderIncrement;\r\n        arrayCounter += arrayPart.length;\r\n\r\n        if (arrayCounter >= arrayLength)\r\n            break;\r\n    }\r\n\r\n    return {min: minValue, max: maxValue};\r\n}","export const SHOW_SNACKBAR_EVENT = \"SHOW_SNACKBAR\";\r\nexport const SHOW_NEW_VERSION_EVENT = \"SHOW_NEW_VERSION_EVENT\";\r\nexport const CLOSE_DRAWER_EVENT = \"CLOSE_DRAWER_EVENT\";\r\nexport const OPEN_BOTTOM_DRAWER_EVENT = \"OPEN_BOTTOM_DRAWER_EVENT\";","import * as BABYLON from \"babylonjs\";\r\nimport {Scene} from \"babylonjs/scene\";\r\nimport {Particle} from \"babylonjs/Particles/particle\";\r\nimport SolidPoint from \"./SolidPoint\";\r\nimport {PointCloudFiltersState} from \"../../../../../store/ui/panels/pointCloudFiltersPanel/pointCloudFiltersPanel\";\r\nimport {PointsCloudSystem} from \"babylonjs/Particles/pointsCloudSystem\";\r\nimport calculateMinMaxOfArray from \"../../../../../utilities/math/calculateMaxMinOfArray\";\r\nimport ApiProvider from \"../../../../../services/apiProvider/ApiProvider\";\r\nimport IoC from \"../../../../../environment/ioc/IoC\";\r\nimport {EventBusService} from \"../../../../../services/eventBus/EventBusService\";\r\nimport {EVENT_BUS_SERVICE} from \"../../../../../environment/ioc/ServiceTypes\";\r\nimport {SHOW_SNACKBAR_EVENT} from \"../../../../../services/eventBus/EventTypes\";\r\nimport {SnackbarEvent} from \"../../../snackbar/code/SnackbarEvent\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport i18next from \"i18next\";\r\n\r\nexport default async function constructPointCloud(scene: Scene,\r\n                                                  points: SolidPoint[],\r\n                                                  parameterMin: number,\r\n                                                  parameterMax: number,\r\n                                                  cloudPointFilters: PointCloudFiltersState): Promise<PointsCloudSystem> {\r\n\r\n\r\n    const filteredPoints: SolidPoint[] = filterPointCloud(points,cloudPointFilters);\r\n    const pointsCloudSystem = new BABYLON.PointsCloudSystem(\"pcs\", 3, scene, {updatable: false});\r\n\r\n    const diffP = parameterMax - parameterMin;\r\n    let constructParticle = (particle: Particle, i: number, _: any) => {\r\n        let point = filteredPoints[i];\r\n        const pPercent = ((point.parameter - parameterMin) / diffP) * 100;\r\n\r\n        let r: number = 0;\r\n        let g: number = 0;\r\n        let b: number = 0;\r\n\r\n        if (pPercent <= 0) {\r\n            r = 0;\r\n            g = 0;\r\n            b = 0;\r\n        } else if (pPercent > 0 && pPercent <= 25) {\r\n            r = 255;\r\n            g = 0 - ((0 - 255) / (0 - 25)) * (0 - pPercent);\r\n            b = 0;\r\n        } else if (pPercent > 25 && pPercent <= 50) {\r\n            r = 255 - ((255 - 0) / (25 - 50)) * (25 - pPercent);\r\n            g = 255;\r\n            b = 0;\r\n        } else if (pPercent > 50 && pPercent <= 75) {\r\n            r = 0;\r\n            g = 255;\r\n            b = 0 - ((0 - 255) / (50 - 100)) * (50 - pPercent);\r\n        } else if (pPercent > 75 && pPercent <= 100) {\r\n            r = 0;\r\n            g = 255 - ((255 - 0) / (75 - 100)) * (75 - pPercent);\r\n            b = 255;\r\n        } else if (pPercent > 100) {\r\n            r = 0;\r\n            g = 0;\r\n            b = 0;\r\n        }\r\n\r\n        //particle.position = new BABYLON.Vector3((point.x - 76990) / 100, (point.y - 92383) / 100, (point.z - 525) / 10);\r\n        particle.position = new BABYLON.Vector3(point.x, point.y, point.z);\r\n        particle.color = new BABYLON.Color4(r / 255, g / 255, b / 255, 1)\r\n    }\r\n\r\n    const pointsCount = filteredPoints.length;\r\n    pointsCloudSystem.addPoints(pointsCount, constructParticle);\r\n    const mesh = await pointsCloudSystem.buildMeshAsync();\r\n    return pointsCloudSystem;\r\n}\r\n\r\nexport function setUpPointCloud(file: File, cloudPointFilters: PointCloudFiltersState) {\r\n    const reader: FileReader = new FileReader()\r\n\r\n    reader.onload = async (e: ProgressEvent<FileReader>) => {\r\n        const fileLines: string[] = [];\r\n        const text: string = <string>(reader.result)\r\n        let lines: string[] = text.split('\\n');\r\n        lines.forEach((line) => {\r\n            fileLines.push(line.slice(0, -1));\r\n        });\r\n\r\n        const points: SolidPoint[] = fileLines.map((line: string) => {\r\n            const points: string[] = line.split(';');\r\n            const x: number = Number.parseFloat(points[0] ? points[0].replace(',', '.') : \"0\");\r\n            const y: number = Number.parseFloat(points[1] ? points[1].replace(',', '.') : \"0\");\r\n            const z: number = Number.parseFloat(points[2] ? points[2].replace(',', '.') : \"0\");\r\n            const p: number = Number(points[3] ? points[3].replace(',', '.') : \"0\");\r\n\r\n            return new SolidPoint(x, y, z, p);\r\n        });\r\n\r\n        const parameters = points.map(p => p.parameter);\r\n        const {max, min} = calculateMinMaxOfArray(parameters);\r\n        const parameterMin = min;\r\n        const parameterMax = max;\r\n\r\n        const apiProvider: ApiProvider = IoC.get(Symbol.for(\"API_PROVIDER_SERVICE\"));\r\n        const scene = apiProvider.scene.scene as Scene;\r\n\r\n        const sceneRootApi = apiProvider.scene;\r\n        if (sceneRootApi.pointsCloudSystem && apiProvider.scene.pointsCloudSystem !== null) {\r\n            sceneRootApi.pointsCloudSystem.dispose()\r\n            sceneRootApi.pointsCloudSystem = null;\r\n        }\r\n\r\n        const pointsCloudSystem = await constructPointCloud(scene, points, parameterMin, parameterMax, cloudPointFilters);\r\n        const previousPcsMesh = apiProvider.scene.pointsCloudSystem?.mesh;\r\n        apiProvider.scene.pointsCloudSystem = pointsCloudSystem;\r\n\r\n        const eventBus = IoC.get<EventBusService>(EVENT_BUS_SERVICE)\r\n\r\n        if(previousPcsMesh !== pointsCloudSystem.mesh || !previousPcsMesh)\r\n            eventBus.send(SHOW_SNACKBAR_EVENT, {message: i18next.t('point_cloud_successfully_uploaded'), alertType: \"success\"} as SnackbarEvent)\r\n    };\r\n\r\n    const blob: Blob = <Blob>file;\r\n    reader.readAsText(blob);\r\n}\r\n\r\nfunction filterPointCloud(points: SolidPoint[], cloudPointFilters: PointCloudFiltersState): SolidPoint[] {\r\n    const filteredPoints = points.filter(point => {\r\n        const {x, y, z} = point\r\n\r\n        if ((x >= cloudPointFilters.filterXFromLimit && x <= cloudPointFilters.filterXToLimit)\r\n            &&\r\n            (y >= cloudPointFilters.filterYFromLimit && y <= cloudPointFilters.filterYToLimit)\r\n            &&\r\n            (z >= cloudPointFilters.filterZFromLimit && z <= cloudPointFilters.filterZToLimit)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    });\r\n\r\n    return filteredPoints;\r\n}","import styled from \"styled-components\";\r\n\r\nexport const PointCloudContainer = styled.div`\r\n    pointerEvents: \"none\";\r\n    position: fixed;\r\n    height: 100%;\r\n    width: 100%;\r\n    left: 0;\r\n    top: 61.5px;\r\n    background: transparent;\r\n    pointer-events: none;\r\n`\r\n","export enum BottomDrawerContentType{\r\n    None,\r\n    PointCloud\r\n}","import {Selector, useSelector} from \"react-redux\";\r\nimport {createSelector} from \"@reduxjs/toolkit\";\r\nimport * as React from \"react\";\r\nimport {setUpPointCloud} from \"./code/constructPointCloud\";\r\nimport {\r\n    getPointCloudFiltersPanelSelector,\r\n    PointCloudFiltersState\r\n} from \"../../../../store/ui/panels/pointCloudFiltersPanel/pointCloudFiltersPanel\";\r\nimport {ApplicationState} from \"../../../../store/store\";\r\nimport {PointCloudContainer} from \"./style\";\r\n\r\nconst pointCloudFileSelector: Selector<ApplicationState, File | null> = state => state.ui.sections.pointCloudSection.pointsCloudFile;\r\n\r\nconst dataSelector = createSelector([getPointCloudFiltersPanelSelector, pointCloudFileSelector],\r\n    (pointCloudFilters: PointCloudFiltersState, file: File | null) => {\r\n        return {\r\n            pointCloudFilters,\r\n            file\r\n        }\r\n    })\r\n\r\nconst PointCloud = () => {\r\n    const props = useSelector(dataSelector);\r\n    const cloudPointFilters = props.pointCloudFilters\r\n    const cloudPointFile = props.file\r\n\r\n    if (cloudPointFile && cloudPointFile !== null)\r\n        setUpPointCloud(cloudPointFile, cloudPointFilters)\r\n\r\n    return (\r\n        <PointCloudContainer/>\r\n    )\r\n}\r\n\r\nexport default PointCloud","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {themeColor} from \"../../../theme/themeAccessors\";\r\nimport {ThemeColors} from \"../../../theme/ThemeColors\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nexport const PanelContainer = styled.section<{ theme: Theme, width: number, height: number, isActive: number }>`\r\n width: ${props => props.width}px;\r\n height: ${props => props.height}px;\r\n background: ${themeColor(ThemeColors.lightGray)};\r\n border-radius: 5px;\r\n pointer-events: auto;\r\n visibility: ${props => props.isActive ? `visible` : `hidden`};\r\n`\r\n\r\nexport const PanelHeaderContainer = styled.strong<Theme>`\r\n`\r\n\r\nexport const PanelHeader = styled.div<Theme>`\r\ncursor: move;\r\nbackground: ${themeColor(ThemeColors.darkBlue)};\r\nborder-top-left-radius: 5px;\r\nborder-top-right-radius: 5px;\r\ncolor: ${themeColor(ThemeColors.white)};\r\ntext-align: center;\r\nheight: 30px;\r\n`\r\n\r\nexport const PanelHeaderText = styled.div<Theme>`\r\nmargin-left: 8px;\r\nalign-content: center;\r\ndisplay: inline-block;\r\n`\r\n\r\nexport const PanelHeaderTypography = styled(Typography)`\r\n`;\r\n\r\nexport const PanelBodyContainer = styled.div<Theme>`\r\nmargin: 16px;\r\n`;","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\n\r\nexport const PointCloudPanelLineContainer = styled.div<Theme>`\r\nmargin-top: 12px;\r\n`\r\n\r\n","import {Theme} from \"styled-system\";\r\nimport {withTheme} from \"styled-components\";\r\nimport {PanelBodyContainer} from \"../../shared/style\";\r\nimport {PointCloudPanelLineContainer} from \"../style\";\r\nimport {TextField} from \"@material-ui/core\";\r\nimport {isNumeric} from \"rxjs/internal-compatibility\";\r\nimport {\r\n    changeXFromLimit,\r\n    changeXToLimit,\r\n    changeYFromLimit,\r\n    changeYToLimit,\r\n    changeZFromLimit,\r\n    changeZToLimit,\r\n    getPointCloudFiltersPanelSelector, PointCloudFiltersState\r\n} from \"../../../../../../store/ui/panels/pointCloudFiltersPanel/pointCloudFiltersPanel\";\r\nimport * as React from \"react\";\r\nimport {useAppDispatch} from \"../../../../../../store/store\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {createSelector} from \"@reduxjs/toolkit\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nconst dataSelector = createSelector(\r\n    [getPointCloudFiltersPanelSelector],\r\n    (filter: PointCloudFiltersState) => ({\r\n        filter : filter\r\n    })\r\n)\r\n\r\nconst PointCloudPanelFilters: React.FC<{ theme: Theme }> = (props) => {\r\n    const dispatch = useAppDispatch()\r\n    const {t} = useTranslation()\r\n    const data = useSelector(dataSelector)\r\n    const filter = data.filter\r\n\r\n    return (\r\n        <PanelBodyContainer>\r\n            <PointCloudPanelLineContainer>\r\n                <TextField\r\n                    label={t('point_cloud_x_from')}\r\n                    type=\"number\"\r\n                    name={\"x-from\"}\r\n                    step=\"0.1\"\r\n                    value={filter.filterXFromLimit}\r\n                    onChange={event => {\r\n                        const value = event.target.value;\r\n                        if (isNumeric(value))\r\n                            dispatch(changeXFromLimit(value))\r\n                    }}\r\n                    style={{width: 100, height: 20}}\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                    inputProps={{\r\n                        step: 0.1\r\n                    }}\r\n                    variant=\"standard\"\r\n                />\r\n                <TextField\r\n                    id=\"outlined-number\"\r\n                    label={t('point_cloud_x_to')}\r\n                    type=\"number\"\r\n                    name={\"x-to\"}\r\n                    step=\"0.1\"\r\n                    value={filter.filterXToLimit}\r\n                    onChange={event => dispatch(changeXToLimit(event.target.value))}\r\n                    style={{width: 100, marginLeft: 24}}\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                    inputProps={{\r\n                        step: 0.1\r\n                    }}\r\n                    variant=\"standard\"/>\r\n            </PointCloudPanelLineContainer>\r\n            <PointCloudPanelLineContainer>\r\n                <TextField\r\n                    id=\"outlined-number\"\r\n                    label={t('point_cloud_y_from')}\r\n                    type=\"number\"\r\n                    name={\"y-from\"}\r\n                    step=\"0.1\"\r\n                    value={filter.filterYFromLimit}\r\n                    onChange={event => dispatch(changeYFromLimit(event.target.value))}\r\n                    style={{width: 100, height: 20}}\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                    inputProps={{\r\n                        step: 0.1\r\n                    }}\r\n                    variant=\"standard\"\r\n                />\r\n                <TextField\r\n                    id=\"outlined-number\"\r\n                    label={t('point_cloud_y_to')}\r\n                    type=\"number\"\r\n                    name={\"y-to\"}\r\n                    step=\"0.1\"\r\n                    value={filter.filterYToLimit}\r\n                    onChange={event => dispatch(changeYToLimit(event.target.value))}\r\n                    style={{width: 100, marginLeft: 24}}\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                    inputProps={{\r\n                        step: 0.1\r\n                    }}\r\n                    variant=\"standard\"/>\r\n            </PointCloudPanelLineContainer>\r\n            <PointCloudPanelLineContainer>\r\n                <TextField\r\n                    id=\"outlined-number\"\r\n                    label={t('point_cloud_z_from')}\r\n                    type=\"number\"\r\n                    name={\"z-from\"}\r\n                    step=\"0.1\"\r\n                    value={filter.filterZFromLimit}\r\n                    onChange={event => dispatch(changeZFromLimit(event.target.value))}\r\n                    style={{width: 100, height: 20}}\r\n                    InputLabelProps={{\r\n                        shrink: true\r\n                    }}\r\n                    inputProps={{\r\n                        step: 0.1\r\n                    }}\r\n                    variant=\"standard\"\r\n                />\r\n                <TextField\r\n                    id=\"outlined-number\"\r\n                    label={t('point_cloud_z_to')}\r\n                    type=\"number\"\r\n                    name={\"z-to\"}\r\n                    step=\"0.1\"\r\n                    value={filter.filterZToLimit}\r\n                    onChange={event => dispatch(changeZToLimit(event.target.value))}\r\n                    style={{width: 100, marginLeft: 24}}\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                    inputProps={{\r\n                        step: 0.1\r\n                    }}\r\n                    variant=\"standard\"/>\r\n            </PointCloudPanelLineContainer>\r\n        </PanelBodyContainer>\r\n    )\r\n}\r\n\r\nexport default withTheme(PointCloudPanelFilters)","import Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Draggable from 'react-draggable';\r\nimport {\r\n    closePointCloudFiltersPanel,\r\n    pointCloudFiltersPanelActivitySelector\r\n} from \"../../../../../store/ui/sections/pointCloudSection/pointCloudSection\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport * as React from \"react\";\r\nimport {useAppDispatch} from \"../../../../../store/store\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {createSelector} from \"@reduxjs/toolkit\";\r\nimport {withTheme} from \"styled-components\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {\r\n    PanelContainer,\r\n    PanelHeaderContainer,\r\n    PanelHeader,\r\n    PanelHeaderText,\r\n    PanelHeaderTypography\r\n} from \"../shared/style\";\r\nimport {AppCloseIcon} from \"../../../shared/style\";\r\nimport PointCloudPanelFilters from \"./shared\";\r\n\r\nconst dataSelector = createSelector([pointCloudFiltersPanelActivitySelector], (isActive: boolean) =>\r\n    ({\r\n        isActive : isActive\r\n    })\r\n);\r\n\r\nconst PointCloudPanel: React.FC<{ theme: Theme }> = (props) => {\r\n    const dispatch = useAppDispatch()\r\n    const {t} = useTranslation()\r\n    const data = useSelector(dataSelector)\r\n\r\n    return (\r\n        <Draggable bounds=\"parent\" handle=\"strong\" defaultPosition={{x: 16, y: 16}}>\r\n            <PanelContainer isActive={data.isActive} width={257} height={240}>\r\n                <section>\r\n                    <PanelHeaderContainer>\r\n                        <PanelHeader>\r\n                            <PanelHeaderText>\r\n                                <PanelHeaderTypography variant=\"subtitle1\">{t('point_cloud_filters')}</PanelHeaderTypography>\r\n                            </PanelHeaderText>\r\n                            <Tooltip title={t('close')}\r\n                                     style={{\r\n                                         float: \"right\"\r\n                                     }}>\r\n                                <label>\r\n                                    <IconButton\r\n                                        component=\"span\"\r\n                                        size=\"small\"\r\n                                        onClick={() => dispatch(closePointCloudFiltersPanel())}\r\n                                        color=\"primary\">\r\n                                        <AppCloseIcon/>\r\n                                    </IconButton>\r\n                                </label>\r\n                            </Tooltip>\r\n                        </PanelHeader>\r\n                    </PanelHeaderContainer>\r\n                    <PointCloudPanelFilters/>\r\n                </section>\r\n            </PanelContainer>\r\n        </Draggable>\r\n    )\r\n}\r\n\r\nexport default withTheme(PointCloudPanel)","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {appSizes} from \"../../theme/themeAccessors\";\r\n\r\nexport const PanelsContainer = styled.div<Theme>`\r\n    position: fixed;\r\n    height: calc(100vh - ${props => appSizes('header')(props) + appSizes('footer')(props) + appSizes('instrumentalPanel')(props)}px);\r\n    background: transparent;\r\n    pointer-events: none;\r\n    left: 0;\r\n    top: 81px;\r\n    right: 0;     \r\n`","import * as React from \"react\";\r\nimport {withTheme} from \"styled-components\";\r\nimport PointCloudPanel from \"./pointCloudPanel\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {PanelsContainer} from \"./style\";\r\n\r\nconst Panels: React.FC<{ theme: Theme }> = (props) => {\r\n    return (\r\n        <PanelsContainer>\r\n            <PointCloudPanel/>\r\n        </PanelsContainer>\r\n    );\r\n}\r\n\r\nexport default withTheme(Panels);","import React, {Component, useState} from 'react';\r\nimport * as BABYLON from 'babylonjs';\r\nimport IoC from \"../../../../environment/ioc/IoC\";\r\nimport isCanvasSupported from \"../../../../utilities/dom/isCanvasSupported\";\r\nimport setupScene from \"./code/setupScene\";\r\nimport setupCamera from \"./code/setupCamera\";\r\nimport setupLight from \"./code/setupLight\";\r\nimport {Engine} from \"babylonjs/Engines/engine\";\r\nimport {Light} from \"babylonjs/Lights/light\";\r\nimport {ArcRotateCamera} from \"babylonjs/Cameras/arcRotateCamera\";\r\nimport setupZoom from \"./code/setupZoom\";\r\nimport ApiProvider from \"../../../../services/apiProvider/ApiProvider\";\r\nimport {withTheme} from \"styled-components\";\r\nimport {Canvas} from \"./style\";\r\nimport PointCloud from \"../pointCloudSystem\";\r\nimport {Hidden, Theme} from \"@material-ui/core\";\r\nimport Panels from \"../panels\";\r\n\r\nconst Scene: React.FC<{ theme: Theme }> = (props) => {\r\n    function initialize(canvas: HTMLCanvasElement) {\r\n        if (!isCanvasSupported()) {\r\n            console.log('canvas is not supported!');\r\n            alert('canvas is not supported!');\r\n        }\r\n        const apiProvider: ApiProvider = IoC.get(Symbol.for(\"API_PROVIDER_SERVICE\"));\r\n        const sceneAspects = apiProvider.scene;\r\n\r\n        const engine: Engine = new BABYLON.Engine(canvas, true);\r\n        sceneAspects.engine = engine;\r\n\r\n        const theme = props.theme;\r\n        const scene: BABYLON.Scene = setupScene(engine, theme);\r\n        sceneAspects.scene = scene;\r\n\r\n        const camera: ArcRotateCamera = setupCamera(canvas, scene);\r\n        sceneAspects.camera = camera;\r\n\r\n        const light: Light = setupLight(scene);\r\n        sceneAspects.light = light;\r\n\r\n        setupZoom(scene, engine, camera);\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Canvas\r\n                ref={canvas => {\r\n                    if (canvas != undefined && canvas) {\r\n                        initialize(canvas);\r\n                    }\r\n                }}\r\n            />\r\n            <PointCloud/>\r\n            <Hidden smDown>\r\n                <Panels/>\r\n            </Hidden>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withTheme(Scene);\r\n","export default function isCanvasSupported() {\r\n    const elem = document.createElement('canvas');\r\n    return !!(elem.getContext && elem.getContext('2d'));\r\n}","import * as BABYLON from 'babylonjs';\r\nimport {ArcRotateCamera} from \"babylonjs/Cameras/arcRotateCamera\";\r\n\r\nexport default function setupCamera(canvas: HTMLCanvasElement, scene: BABYLON.Scene): ArcRotateCamera {\r\n    const camera: ArcRotateCamera = new BABYLON.ArcRotateCamera('Camera', 0, 0, -100, new BABYLON.Vector3(1, 2, -3), scene);\r\n\r\n    camera.setPosition(new BABYLON.Vector3(0, 0, -100));\r\n    camera.target = new BABYLON.Vector3(0, 0, 0);\r\n    camera.orthoLeft = -8;\r\n    camera.orthoRight = 8;\r\n    const ratio = canvas.height / canvas.width;\r\n    camera.orthoTop = camera.orthoRight * ratio;\r\n    camera.orthoBottom = camera.orthoLeft * ratio;\r\n\r\n    camera.attachControl(canvas, false);\r\n    camera.alpha += Math.PI; // camera +180\r\n    camera.attachControl(canvas, true, false, 0);\r\n    camera.mode = BABYLON.Camera.ORTHOGRAPHIC_CAMERA;\r\n\r\n    camera.lowerRadiusLimit = camera.radius;\r\n    camera.upperRadiusLimit = camera.radius;\r\n    return camera;\r\n}","import * as BABYLON from \"babylonjs\";\r\nimport {Light} from \"babylonjs/Lights/light\";\r\n\r\nexport default function setupLight(scene : BABYLON.Scene) : Light {\r\n    const light = new BABYLON.HemisphericLight(\"light\", new BABYLON.Vector3(0, 1, 0), scene);\r\n    light.intensity = 0.7;\r\n\r\n    return light;\r\n}","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {ThemeColors} from \"../../../theme/ThemeColors\";\r\nimport {appSizes, themeColor} from \"../../../theme/themeAccessors\";\r\n\r\nexport const HeaderMobilePanelContainer = styled.div<Theme>`\r\nbackground: ${themeColor(ThemeColors.lightGray)};\r\nheight: ${appSizes(\"headerMobile\")}px;\r\nflexGrow: 1;\r\n`\r\n","import ListItem from \"@material-ui/core/ListItem\";\r\nimport {ListItemIcon, Theme} from \"@material-ui/core\";\r\nimport BlurOnIcon from \"@material-ui/icons/BlurOn\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport {ExpandLess, ExpandMore, StarBorder} from \"@material-ui/icons\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport List from \"@material-ui/core/List\";\r\nimport React, {Fragment, useState} from \"react\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {withTheme} from \"styled-components\";\r\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\r\nimport DialpadIcon from '@material-ui/icons/Dialpad';\r\nimport {\r\n    pointCloudLoadFile\r\n} from \"../../../../../../../store/ui/sections/pointCloudSection/pointCloudSection\";\r\nimport {useAppDispatch} from \"../../../../../../../store/store\";\r\nimport IoC from \"../../../../../../../environment/ioc/IoC\";\r\nimport {EventBusService} from \"../../../../../../../services/eventBus/EventBusService\";\r\nimport {EVENT_BUS_SERVICE} from \"../../../../../../../environment/ioc/ServiceTypes\";\r\nimport {CLOSE_DRAWER_EVENT, OPEN_BOTTOM_DRAWER_EVENT} from \"../../../../../../../services/eventBus/EventTypes\";\r\nimport {BottomDrawerContentType} from \"../../bottom/code/BottomDrawerContentType\";\r\n\r\nconst PointCloudMenuItem: React.FC<{ theme: Theme }> = (_) => {\r\n    const {t} = useTranslation()\r\n    const dispatch = useAppDispatch()\r\n\r\n    const [state, setState] = useState({\r\n        subMenuIsOpen: false\r\n    })\r\n    const {subMenuIsOpen} = state\r\n\r\n    const handleClick = () => {\r\n        setState({subMenuIsOpen: !subMenuIsOpen});\r\n    };\r\n\r\n    const openPanelPointCloudFiltersClickHandle = () => {\r\n        const eventBus = IoC.get<EventBusService>(EVENT_BUS_SERVICE)\r\n        eventBus.send(OPEN_BOTTOM_DRAWER_EVENT,{contentType: BottomDrawerContentType.PointCloud})\r\n        eventBus.send(CLOSE_DRAWER_EVENT,{})\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <ListItem button onClick={handleClick}>\r\n                <ListItemIcon>\r\n                    <BlurOnIcon/>\r\n                </ListItemIcon>\r\n                <ListItemText primary={t('point_cloud')}/>\r\n                {subMenuIsOpen ? <ExpandLess/> : <ExpandMore/>}\r\n            </ListItem>\r\n            <Collapse in={subMenuIsOpen} timeout=\"auto\" unmountOnExit>\r\n                <List component=\"div\" disablePadding>\r\n                    <ListItem button style={{paddingLeft: 32}}>\r\n                        <Fragment>\r\n                            <input\r\n                                color=\"primary\"\r\n                                type=\"file\"\r\n                                onChange={(e) => {\r\n                                    e.preventDefault();\r\n                                    const file: File = e.target.files?.[0] as File;\r\n                                    if (file && file !== undefined) {\r\n                                        const eventBus = IoC.get<EventBusService>(EVENT_BUS_SERVICE)\r\n                                        eventBus.send(CLOSE_DRAWER_EVENT,{})\r\n                                        dispatch(pointCloudLoadFile(file));\r\n                                    }\r\n                                }}\r\n                                id=\"icon-button-file\"\r\n                                style={{display: 'none'}}/>\r\n                            <label htmlFor=\"icon-button-file\">\r\n                                <ListItemIcon>\r\n                                    <CloudUploadIcon/>\r\n                                </ListItemIcon>\r\n                            </label>\r\n                            <label htmlFor=\"icon-button-file\">\r\n                                <ListItemText primary={t('load_file_with_point_cloud')}/>\r\n                            </label>\r\n                        </Fragment>\r\n\r\n                    </ListItem>\r\n                    <ListItem button style={{paddingLeft: 32}}>\r\n                        <ListItemIcon\r\n                            onClick={openPanelPointCloudFiltersClickHandle}>\r\n                            <DialpadIcon/>\r\n                        </ListItemIcon>\r\n                        <ListItemText\r\n                            onClick={openPanelPointCloudFiltersClickHandle}\r\n                            primary={t('open_panel_point_cloud_filters')}/>\r\n                    </ListItem>\r\n                </List>\r\n            </Collapse>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default withTheme(PointCloudMenuItem)","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {themeColor} from \"../../../../theme/themeAccessors\";\r\nimport {ThemeColors} from \"../../../../theme/ThemeColors\";\r\n\r\nexport const DrawerContainer = styled.section<Theme>`\r\nwidth : 250px;\r\n`\r\nexport const DrawerHeader = styled.div<Theme>`\r\ndisplay: flex;\r\njustify-content: flex-end;\r\nalign-items: center;\r\npadding: ${props => props.theme.spacing(0, 1)};\r\n\r\n${props => props.theme.breakpoints.up(\"sm\")} {\r\n      height: 104px;\r\n}\r\n${props => props.theme.breakpoints.down(\"sm\")} {\r\n       height: 56px;\r\n}\r\n`\r\n\r\nexport const DrawerHeaderTitle = styled(Typography)`\r\n color: ${themeColor(ThemeColors.darkBlue)};\r\n margin-right: auto;\r\n margin-left: 16px;\r\n`","import {Theme} from \"@material-ui/core\";\r\nimport {withTheme} from \"styled-components\";\r\nimport IoC from \"../../../../../../environment/ioc/IoC\";\r\nimport {EventBusService} from \"../../../../../../services/eventBus/EventBusService\";\r\nimport {EVENT_BUS_SERVICE} from \"../../../../../../environment/ioc/ServiceTypes\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport List from \"@material-ui/core/List\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {CLOSE_DRAWER_EVENT} from \"../../../../../../services/eventBus/EventTypes\";\r\nimport PointCloudMenuItem from \"./pointCloudMenuItem\";\r\nimport {DrawerContainer, DrawerHeader, DrawerHeaderTitle} from \"./style\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {themeColor} from \"../../../../theme/themeAccessors\";\r\nimport {ThemeColors} from \"../../../../theme/ThemeColors\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\n\r\ninterface DrawerPanelProps {\r\n    theme: Theme,\r\n    isOpen: boolean\r\n}\r\n\r\nconst DrawerLeftPanel: React.FC<DrawerPanelProps> = (props) => {\r\n    const {t} = useTranslation();\r\n\r\n    const [state, setState] = useState({\r\n        isOpen: false\r\n    });\r\n    const {isOpen} = state;\r\n\r\n    useEffect(() => {\r\n            setState({isOpen: props.isOpen})\r\n        }, [props.isOpen]\r\n    )\r\n\r\n    const handleDrawerClose = () => {\r\n        const eventBus = IoC.get<EventBusService>(EVENT_BUS_SERVICE)\r\n        eventBus.send(CLOSE_DRAWER_EVENT, {})\r\n    }\r\n\r\n    const blue = themeColor(ThemeColors.darkBlue)(props);\r\n\r\n    return (\r\n        <Drawer anchor=\"left\"\r\n                open={isOpen}\r\n                onClose={handleDrawerClose}>\r\n            <DrawerContainer>\r\n                <DrawerHeader>\r\n                    <DrawerHeaderTitle variant=\"h5\">{t('aeroset')}</DrawerHeaderTitle>\r\n                    <Tooltip title={t('close')}>\r\n                        <IconButton onClick={handleDrawerClose}>\r\n                            <ChevronLeftIcon onClick={handleDrawerClose}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </DrawerHeader>\r\n                <Divider/>\r\n                <List\r\n                    component=\"nav\"\r\n                    aria-labelledby=\"nested-list-subheader\"\r\n                    style={{width: '100%'}}\r\n                >\r\n                    <PointCloudMenuItem/>\r\n                </List>\r\n            </DrawerContainer>\r\n        </Drawer>\r\n    )\r\n}\r\n\r\nexport default withTheme(DrawerLeftPanel)","import styled from \"styled-components\";\r\nimport {Theme} from \"@material-ui/core\";\r\n\r\nexport const DrawerBottomContainer = styled.section<Theme>`\r\nheight : 270px;\r\nalign-content: center;\r\n`\r\nexport const DrawerBottomHeader = styled.div<Theme>`\r\ndisplay: flex;\r\nvertical-align: center;\r\njustify-content: flex-end;\r\nalign-items: center;\r\npadding: ${props => props.theme.spacing(0, 1)};\r\n`\r\n\r\nexport const MobilePanelContainer = styled.div<Theme>`\r\nvisibility: ${props => {\r\n    // @ts-ignore\r\n    return (props.currentType && props.stateType && props.currentType.valueOf() === props.stateType.valueOf()) ? `visible` : `collapse`;\r\n}};\r\n\r\n`","import styled from \"styled-components\";\r\nimport {Theme} from \"styled-system\";\r\n\r\nexport const PointCloudPanelMobileContainer = styled.div<Theme>`\r\nwidth: 100%;\r\ndisplay: flex;\r\njustify-content: center\r\n`","import React from \"react\";\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {withTheme} from \"styled-components\";\r\nimport PointCloudPanelFilters from \"../shared\";\r\nimport {PointCloudPanelMobileContainer} from \"./style\";\r\n\r\nconst PointCloudPanelMobile: React.FC<{ theme: Theme }> = (props) => {\r\n    return (\r\n        <PointCloudPanelMobileContainer>\r\n            <PointCloudPanelFilters/>\r\n        </PointCloudPanelMobileContainer>\r\n    )\r\n}\r\n\r\nexport default withTheme(PointCloudPanelMobile)","import {Theme} from \"@material-ui/core\";\r\nimport {withTheme} from \"styled-components\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {DrawerBottomContainer, DrawerBottomHeader, MobilePanelContainer} from \"./style\";\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\r\nimport IoC from \"../../../../../../environment/ioc/IoC\";\r\nimport {EventBusService} from \"../../../../../../services/eventBus/EventBusService\";\r\nimport {EVENT_BUS_SERVICE} from \"../../../../../../environment/ioc/ServiceTypes\";\r\nimport {OPEN_BOTTOM_DRAWER_EVENT} from \"../../../../../../services/eventBus/EventTypes\";\r\nimport {BottomDrawerContentType} from \"./code/BottomDrawerContentType\";\r\nimport {AppDivider} from \"../../../../shared/style\";\r\nimport {PanelHeader, PanelHeaderText, PanelHeaderTypography} from \"../../../panels/shared/style\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport PointCloudPanelMobile from \"../../../panels/pointCloudPanel/mobile\";\r\n\r\nconst DrawerBottomPanel: React.FC<{ theme: Theme }> = (props) => {\r\n    const {t} = useTranslation();\r\n\r\n    const [state, setState] = useState({\r\n        isOpen: false,\r\n        visiblePanel: BottomDrawerContentType\r\n    });\r\n    const {isOpen, visiblePanel} = state;\r\n\r\n    useEffect(() => {\r\n        const eventBus = IoC.get<EventBusService>(EVENT_BUS_SERVICE)\r\n        eventBus.subscribe(OPEN_BOTTOM_DRAWER_EVENT, contentChangedHandler)\r\n\r\n        return () => {\r\n            eventBus.unsubscribe(OPEN_BOTTOM_DRAWER_EVENT, contentChangedHandler)\r\n        }\r\n    }, [])\r\n\r\n    const contentChangedHandler = (events: any[]) => {\r\n        const content = events[0] as { contentType: BottomDrawerContentType }\r\n        setState({visiblePanel: content.contentType, isOpen: true})\r\n    }\r\n\r\n    const handleDrawerClose = () => {\r\n        setState({...state, isOpen: false})\r\n    }\r\n\r\n    return (\r\n        <Drawer anchor=\"bottom\"\r\n                open={isOpen}\r\n                onClose={handleDrawerClose}>\r\n            <DrawerBottomContainer>\r\n                <DrawerBottomHeader>\r\n                    <div style={{marginRight: \"auto\"}}>\r\n                        <Typography variant=\"h6\">\r\n                            <MobilePanelContainer currentType={BottomDrawerContentType.PointCloud}\r\n                                                  stateType={visiblePanel}>\r\n                                {t('point_cloud_filters')}\r\n                            </MobilePanelContainer>\r\n                        </Typography>\r\n                    </div>\r\n                    <Tooltip title={t('close')}>\r\n                        <IconButton onClick={handleDrawerClose}>\r\n                            <KeyboardArrowDownIcon onClick={handleDrawerClose}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </DrawerBottomHeader>\r\n                <AppDivider/>\r\n                <MobilePanelContainer currentType={BottomDrawerContentType.PointCloud} stateType={visiblePanel}>\r\n                    <PointCloudPanelMobile/>\r\n                </MobilePanelContainer>\r\n            </DrawerBottomContainer>\r\n        </Drawer>\r\n    )\r\n}\r\n\r\nexport default withTheme(DrawerBottomPanel)","import React, {useEffect, useState} from \"react\";\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport {Theme} from \"@material-ui/core\";\r\nimport {withTheme} from \"styled-components\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {HeaderMobilePanelContainer} from \"./style\";\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport DrawerLeftPanel from \"../drawer/left\";\r\nimport IoC from \"../../../../../environment/ioc/IoC\";\r\nimport {EventBusService} from \"../../../../../services/eventBus/EventBusService\";\r\nimport {EVENT_BUS_SERVICE} from \"../../../../../environment/ioc/ServiceTypes\";\r\nimport {CLOSE_DRAWER_EVENT} from \"../../../../../services/eventBus/EventTypes\";\r\nimport DrawerBottomPanel from \"../drawer/bottom\";\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\n\r\nconst HeaderMobilePanel: React.FC<{ theme: Theme }> = (props) => {\r\n    const {t} = useTranslation();\r\n\r\n    const [state, setState] = useState({\r\n        drawerIsOpen: false\r\n    })\r\n\r\n    useEffect(() => {\r\n            const eventBus = IoC.get<EventBusService>(EVENT_BUS_SERVICE)\r\n            eventBus.subscribe(CLOSE_DRAWER_EVENT, onCloseDrawerEvent)\r\n            setState({isOpen: props.isOpen})\r\n            return () => {\r\n                eventBus.unsubscribe(CLOSE_DRAWER_EVENT, onCloseDrawerEvent)\r\n            }\r\n        }, [props.isOpen]\r\n    )\r\n\r\n    const onCloseDrawerEvent = (_) => {\r\n        setState({drawerIsOpen: false})\r\n    }\r\n\r\n    const menuButtonClickHandle = () => {\r\n        setState({drawerIsOpen: true})\r\n    }\r\n\r\n    return (\r\n        <HeaderMobilePanelContainer>\r\n            <AppBar position=\"static\">\r\n                <Toolbar style={{background: props.theme.app.colors.main.mediumGray}}>\r\n                    <Tooltip title={t('menu')}>\r\n                        <IconButton size={\"medium\"}\r\n                                    color={\"primary\"}\r\n                                    aria-label=\"open drawer\"\r\n                                    style={{verticalAlign: \"middle\"}}\r\n                                    onClick={menuButtonClickHandle}>\r\n                            <MenuIcon style={{color: \"white\", fontSize: 35}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Typography variant=\"h6\" style={{display: \"block\", flexGrow: 1, marginLeft: 16}}>\r\n                        'Scheme name'\r\n                    </Typography>\r\n                    <Tooltip title={t('actions')}>\r\n                        <IconButton size={\"small\"}\r\n                                    color={\"primary\"}\r\n                                    style={{marginLeft: 10}}>\r\n                            <MoreVertIcon style={{color: \"white\", fontSize: 35}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title={t('user_account')}>\r\n                        <IconButton size={\"small\"}\r\n                                    color={\"primary\"}\r\n                                    style={{marginLeft: 10}}>\r\n                            <AccountCircleIcon style={{color: \"white\", fontSize: 35}}/>\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <DrawerLeftPanel isOpen={state.drawerIsOpen}/>\r\n            <DrawerBottomPanel/>\r\n        </HeaderMobilePanelContainer>\r\n    );\r\n}\r\n\r\nexport default withTheme(HeaderMobilePanel);","import {Theme} from \"@material-ui/core\";\r\nimport styled from \"styled-components\";\r\n\r\nexport const SnackbarWrapper = styled.div<Theme>`\r\nwidth: 100%;\r\nheight: 100%;\r\n`","import {Theme} from \"@material-ui/core\";\r\nimport * as React from \"react\";\r\nimport {withTheme} from \"styled-components\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport {useEffect, useState} from \"react\";\r\nimport IoC from \"../../../environment/ioc/IoC\";\r\nimport {EventBusService} from \"../../../services/eventBus/EventBusService\";\r\nimport {SHOW_NEW_VERSION_EVENT, SHOW_SNACKBAR_EVENT} from \"../../../services/eventBus/EventTypes\";\r\nimport {Alert} from \"@material-ui/lab\";\r\nimport {EVENT_BUS_SERVICE} from \"../../../environment/ioc/ServiceTypes\";\r\nimport {SnackbarWrapper} from \"./style\";\r\nimport {SnackbarEvent} from \"./code/SnackbarEvent\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst SnackbarContainer: React.FC<{ theme: Theme }> = (props) => {\r\n    const {t} = useTranslation()\r\n\r\n    const [snackbarState, setSnackbarState] = useState<{\r\n        open: boolean,\r\n        message: string,\r\n        alertType: string,\r\n        callback?: Function,\r\n        isVersionSnackbar: boolean\r\n    }>({\r\n        open: false,\r\n        alertType: \"success\",\r\n        message: \"\",\r\n        isVersionSnackbar: false\r\n    })\r\n\r\n    useEffect(() => {\r\n        const eventBus = IoC.get<EventBusService>(EVENT_BUS_SERVICE)\r\n        eventBus.subscribe(SHOW_SNACKBAR_EVENT, snackbarEventHandler)\r\n        eventBus.subscribe(SHOW_NEW_VERSION_EVENT, showNewVersionEventHandler)\r\n\r\n        return () => {\r\n            eventBus.unsubscribe(SHOW_SNACKBAR_EVENT, snackbarEventHandler)\r\n            eventBus.unsubscribe(SHOW_NEW_VERSION_EVENT, showNewVersionEventHandler)\r\n        }\r\n    }, [])\r\n\r\n    const snackbarEventHandler = (events: any[]) => {\r\n        const event: SnackbarEvent = events[0] as SnackbarEvent\r\n        const {message, alertType, callback} = event\r\n        setSnackbarState({\r\n            ...snackbarState,\r\n            open: true,\r\n            message: message,\r\n            alertType: alertType,\r\n            callback: callback\r\n        });\r\n    }\r\n\r\n    const showNewVersionEventHandler = (events: any[]) => {\r\n        const event: SnackbarEvent = events[0] as SnackbarEvent\r\n        const {message, alertType, callback} = event\r\n        setSnackbarState({\r\n            open: true,\r\n            message: message,\r\n            alertType: alertType,\r\n            callback: callback,\r\n            isVersionSnackbar: true\r\n        });\r\n    }\r\n\r\n    const handleCloseSnackbar = (event: object, reason: string) => {\r\n        if (reason === \"timeout\")\r\n            setSnackbarState({...snackbarState, open: false});\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setSnackbarState({...snackbarState, open: false});\r\n    };\r\n\r\n    const {open, message, callback, alertType, isVersionSnackbar} = snackbarState;\r\n\r\n    const reload = () => {\r\n        location.reload();\r\n        return false;\r\n    }\r\n    const updateVersionAction = (\r\n        <Button color=\"secondary\" size=\"small\" onClick={reload}>\r\n            {t('update')}\r\n        </Button>\r\n    )\r\n    return (\r\n        <SnackbarWrapper>\r\n            <Snackbar\r\n                style={{position: \"absolute\"}}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'right',\r\n                }}\r\n                open={open}\r\n                onClose={handleCloseSnackbar}\r\n                autoHideDuration={isVersionSnackbar ? null : 5000}>\r\n                <Alert onClose={handleClose}\r\n                       severity={alertType}\r\n                       closeText={t('close')}\r\n                       action={updateVersionAction}>\r\n                    {message}\r\n                </Alert>\r\n            </Snackbar>\r\n            <div>\r\n                {props.children}\r\n            </div>\r\n        </SnackbarWrapper>\r\n    )\r\n}\r\nexport default withTheme(SnackbarContainer)","import React from \"react\";\r\nimport {withTheme} from \"styled-components\";\r\nimport {Area} from \"./styles\";\r\nimport {Divider, Hidden, Theme} from \"@material-ui/core\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport HeaderPanel from \"../layout/headerPanel\";\r\nimport InstrumentalPanel from \"../layout/instrumentalPanel\";\r\nimport StatePanel from \"../layout/statePanel\";\r\nimport Scene from \"../layout/scene\";\r\nimport HeaderMobilePanel from \"../layout/mobile/headerPanel\";\r\nimport SnackbarContainer from \"../snackbar\";\r\nimport {AppDivider, AppDividerLight} from \"../shared/style\";\r\n\r\nconst App: React.FC<{ theme: Theme }> = (_) => {\r\n    return (\r\n        <SnackbarContainer>\r\n            <Grid container\r\n                  spacing={0}\r\n                  alignItems=\"stretch\"\r\n                  direction={\"column\"}>\r\n                <Hidden smDown>\r\n                    <Grid item xs={12}>\r\n                        <HeaderPanel/>\r\n                    </Grid>\r\n                </Hidden>\r\n                <Hidden mdUp>\r\n                    <Grid item xs={12}>\r\n                        <HeaderMobilePanel/>\r\n                    </Grid>\r\n                </Hidden>\r\n                <Grid item xs={12}>\r\n                    <AppDividerLight/>\r\n                </Grid>\r\n                <Hidden smDown>\r\n                    <Grid item xs={12}>\r\n                        <InstrumentalPanel/>\r\n                    </Grid>\r\n                </Hidden>\r\n                <Hidden smDown>\r\n                    <Grid item xs={12}>\r\n                        <AppDividerLight/>\r\n                    </Grid>\r\n                </Hidden>\r\n                <Grid item xs={12}>\r\n                    <Area>\r\n                        <Scene/>\r\n                    </Area>\r\n                </Grid>\r\n                <Hidden smDown>\r\n                    <Grid item xs={12}>\r\n                        <AppDividerLight/>\r\n                    </Grid>\r\n                </Hidden>\r\n                <Hidden smDown>\r\n                    <Grid item xs={12}>\r\n                        <StatePanel/>\r\n                    </Grid>\r\n                </Hidden>\r\n            </Grid>\r\n        </SnackbarContainer>\r\n    );\r\n}\r\n\r\nexport default withTheme(App);","import React, {Suspense} from 'react';\nimport ReactDOM from 'react-dom';\nimport \"./internationalization/i18n\"; // import i18n (needs to be bundled ;))\nimport * as serviceWorker from './serviceWorker';\nimport 'fontsource-roboto';\nimport {Provider} from \"react-redux\";\nimport {store} from \"./store/store\";\nimport {BrowserRouter, Route} from 'react-router-dom';\nimport {GlobalStyle} from \"./globalStyle\";\nimport Theme from \"./views/components/theme\";\nimport App from \"./views/components/app\";\nimport {CssBaseline} from \"@material-ui/core\";\nimport initWorkboxRefresh from '@loopmode/cra-workbox-refresh'\nimport IoC from \"./environment/ioc/IoC\";\nimport {EventBusService} from \"./services/eventBus/EventBusService\";\nimport {EVENT_BUS_SERVICE} from \"./environment/ioc/ServiceTypes\";\nimport {SnackbarEvent} from \"./views/components/snackbar/code/SnackbarEvent\";\nimport i18next from \"i18next\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <BrowserRouter>\n            <React.StrictMode>\n                <GlobalStyle/>\n                <CssBaseline/>\n                <Theme>\n                    <Suspense fallback=\"\">\n                        <div style={{position: \"absolute\"}}>6</div>\n                        <App/>\n                    </Suspense>\n                </Theme>\n            </React.StrictMode>\n        </BrowserRouter>\n    </Provider>,\n    document.getElementById('root')\n);\n\nfunction renderRefreshUI(registration : any, { refresh }) {\n    const eventBus = IoC.get<EventBusService>(EVENT_BUS_SERVICE)\n    const event : SnackbarEvent = {\n        message : i18next.t('new_version'),\n        alertType : \"info\",\n        callback : refresh\n    }\n    eventBus.send('SHOW_NEW_VERSION_EVENT',event)\n}\n\nwindow.onbeforeunload = function(e) {\n    alert(\"onbeforeunload\");//or any message\n};\n\nwindow.onerror = function unhandledExceptionErrorHandler(errorMsg, url, lineNumber) {\n    alert(\"Error occured: \" + errorMsg);//or any message\n    return false;\n}\n\nserviceWorker.register({\n         onUpdate: registration => {\n             console.log(\"New Version\")\n             return initWorkboxRefresh(registration, {render: renderRefreshUI});\n         }\n})\n"],"sourceRoot":""}